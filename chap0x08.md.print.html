<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="é»„ç®" />
  <title>Linuxç³»ç»Ÿä¸ç½‘ç»œç®¡ç†</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Linuxç³»ç»Ÿä¸ç½‘ç»œç®¡ç†</h1>
<p class="author">é»„ç®</p>
</header>
<h1 id="ç¬¬å…«ç« devopsæ–‡åŒ–è¿ç»´è‡ªåŠ¨åŒ–ä¸æŒç»­éƒ¨ç½²">ç¬¬å…«ç« ï¼šDevOpsæ–‡åŒ–ã€è¿ç»´è‡ªåŠ¨åŒ–ä¸æŒç»­éƒ¨ç½²</h1>
<hr />
<h2 id="life-is-short-automate-more">Life is short, automate more</h2>
<p style="text-align: center">
<video controls autoplay loop muted src="images/chap0x08/Life is Short, Play More.mp4">
</video>
</p>
<h1 id="æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦devops">æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦DevOpsï¼Ÿ</h1>
<hr />
<p><a href="http://coolshell.cn/articles/1174.html">ä¸‹é¢æ˜¯ç¨‹åºå‘˜æ—¥å¸¸å·¥ä½œå½“ä¸­æƒ¯ç”¨çš„è§£é‡Šï¼Œçœ‹çœ‹ä½ æœ‰æ²¡æœ‰èººæªï¼Ÿ</a></p>
<ol type="1">
<li><strong>åœ¨æˆ‘è¿™è¾¹çš„ç”µè„‘ä¸Šå¯ä»¥å·¥ä½œå•Šâ€¦â€¦</strong></li>
<li>æˆ‘é‡æ¥æ²¡æœ‰å¬è¿‡è¿™æ ·çš„äº‹</li>
<li>æ˜¨å¤©è¿˜èƒ½æ­£å¸¸å·¥ä½œå‘¢</li>
<li>å¥½å§ï¼Œè¿™ç®—ä¸€ä¸ªBUG</li>
<li>è¿™æ€ä¹ˆå¯èƒ½ï¼Ÿ</li>
<li>è¿™åº”è¯¥æ˜¯æœºå™¨æˆ–æ˜¯ç¯å¢ƒçš„é—®é¢˜</li>
<li>æ“ä½œç³»ç»Ÿæ›´æ–°äº†å—ï¼Ÿ</li>
<li>ä¸€å®šåˆæ˜¯ç”¨æˆ·é‚£è¾¹çš„é”™</li>
<li>ä½ çš„æµ‹è¯•æ•°æ®ä¸€å®šæœ‰é—®é¢˜</li>
<li>æˆ‘ä»æ¥æ²¡æœ‰ç¢°è¿‡é‚£è¾¹çš„ä»£ç ï¼</li>
</ol>
<hr />
<p><strong>æˆ‘è¿™è¾¹çš„ç”µè„‘</strong>æœ‰ä»€ä¹ˆé­”æ³•ï¼Ÿ<strong>å…¶ä»–äººçš„ç”µè„‘</strong>æœ‰ä»€ä¹ˆâ€œè¯…å’’â€ï¼Ÿ</p>
<blockquote>
<p><img src="images/chap0x08/joke-on-devops.jpeg" /></p>
</blockquote>
<hr />
<p>å¼€å‘äººå‘˜çš„è¿è¡Œç¯å¢ƒå’Œè¿ç»´ã€æµ‹è¯•ã€ç”¨æˆ·çš„è¿è¡Œç¯å¢ƒä¸ä¸€è‡´ï¼</p>
<p>å¼€å‘äººå‘˜çš„è¿è¡Œç¯å¢ƒå’Œè¿ç»´ã€æµ‹è¯•ã€ç”¨æˆ·çš„è¿è¡Œç¯å¢ƒä¸ä¸€è‡´ï¼</p>
<p>å¼€å‘äººå‘˜çš„è¿è¡Œç¯å¢ƒå’Œè¿ç»´ã€æµ‹è¯•ã€ç”¨æˆ·çš„è¿è¡Œç¯å¢ƒä¸ä¸€è‡´ï¼</p>
<hr />
<p>æ€ä¹ˆè§£å†³<strong>è¿è¡Œç¯å¢ƒä¸ä¸€è‡´</strong>çš„å›°å±€ï¼Ÿ</p>
<h1 id="devopsheading">DevOps</h1>
<hr />
<ul>
<li>æ»¡è¶³éœ€æ±‚å’Œç¯å¢ƒå¤šæ ·æ€§ã€é¢‘ç¹å˜æ›´å¸¦æ¥çš„<strong>å¿«é€Ÿå“åº”</strong>èƒ½åŠ›æå‡è¦æ±‚æ˜¯DevOpsçš„å‘å±•åŠ¨åŠ›å’Œå‹åŠ›</li>
<li>æé«˜è½¯ä»¶<strong>å¯é æ€§</strong>æ˜¯DevOpsçš„æ ¸å¿ƒç›®æ ‡</li>
</ul>
<hr />
<h2 id="é™æ€è§†è§’çœ‹devops">é™æ€è§†è§’çœ‹<strong>DevOps</strong></h2>
<p><img src="images/chap0x08/Devops.svg.png" /></p>
<hr />
<h2 id="devopså›°å¢ƒ"><strong>DevOps</strong>å›°å¢ƒ</h2>
<ul>
<li>å¼€å‘ï¼šè¿½æ±‚å˜åŒ–</li>
<li>è¿ç»´ï¼šè¿½æ±‚ç¨³å®š</li>
<li>æµ‹è¯•ï¼šè¿½æ±‚æ¶ˆç­é£é™©</li>
</ul>
<p>æ ¸å¿ƒï¼šï¼ˆä¸åŒç»„ç»‡ã€ä¸åŒéƒ¨é—¨ã€ä¸åŒè§’è‰²çš„ï¼‰<strong>æ²Ÿé€š</strong>é—®é¢˜</p>
<hr />
<h2 id="åŠ¨æ€è¿‡ç¨‹è§†è§’çœ‹devops">åŠ¨æ€ï¼ˆè¿‡ç¨‹ï¼‰è§†è§’çœ‹<strong>DevOps</strong></h2>
<p><img src="images/chap0x08/Devops-toolchain.svg.png" /></p>
<p>å½“Devå’ŒOpsæ˜¯ä¸¤ä¸ªäººï¼ˆéƒ¨é—¨ï¼‰çš„æ—¶å€™ï¼Œéœ€æ±‚åˆ†æå’Œäº§å“å‘å¸ƒé˜¶æ®µä¼šå­˜åœ¨å¤§é‡æ²Ÿï¼ˆchÄ•ï¼‰é€šï¼ˆpÃï¼‰æ—¶é—´ï¼Œè§’è‰²å’Œäººå‘˜ä¸Šçš„äºŒåˆä¸€å¯ä»¥ç›´æ¥â€œè·³è¿‡â€æ²Ÿï¼ˆchÄ•ï¼‰é€šï¼ˆpÃï¼‰é˜¶æ®µ</p>
<hr />
<h2 id="awsamazon-web-servicesçš„devopsä»·å€¼è§‚"><a href="https://aws.amazon.com/cn/devops/what-is-devops/">AWSï¼ˆAmazon Web Servicesï¼‰çš„DevOpsä»·å€¼è§‚</a></h2>
<p><strong><em>DevOps é›†æ–‡åŒ–ç†å¿µã€å®è·µå’Œå·¥å…·äºä¸€èº«ï¼Œå¯ä»¥æé«˜ç»„ç»‡é«˜é€Ÿäº¤ä»˜åº”ç”¨ç¨‹åºå’ŒæœåŠ¡çš„èƒ½åŠ›ï¼Œä¸ä½¿ç”¨ä¼ ç»Ÿè½¯ä»¶å¼€å‘å’ŒåŸºç¡€è®¾æ–½ç®¡ç†æµç¨‹ç›¸æ¯”ï¼Œèƒ½å¤Ÿå¸®åŠ©ç»„ç»‡æ›´å¿«åœ°å‘å±•å’Œæ”¹è¿›äº§å“ã€‚è¿™ç§é€Ÿåº¦ä½¿ç»„ç»‡èƒ½å¤Ÿæ›´å¥½åœ°æœåŠ¡å…¶å®¢æˆ·ï¼Œå¹¶åœ¨å¸‚åœºä¸Šæ›´é«˜æ•ˆåœ°å‚ä¸ç«äº‰ã€‚</em></strong></p>
<p><img src="images/chap0x08/DevOps_feedback-diagram.png" /></p>
<h1 id="ä¸ºä»€ä¹ˆè¦è¿ç»´è‡ªåŠ¨åŒ–">ä¸ºä»€ä¹ˆè¦è¿ç»´è‡ªåŠ¨åŒ–ï¼Ÿ</h1>
<hr />
<p><img src="images/chap0x08/kiss_pipe.gif" /></p>
<hr />
<p>å‡å¦‚è®©ä½ å»ç»´æŠ¤å‰è¿°å·²ç»åœ¨â€œæ­£å¸¸å·¥ä½œâ€çš„ç³»ç»Ÿï¼Œç°åœ¨éœ€è¦å‡çº§ç»´æŠ¤å…¶ä¸­ä¸€ä¸ªâ€œ<strong>è€æ—§</strong>â€ç»„ä»¶ä½ è¯¥æ€ä¹ˆä¸‹æ‰‹ï¼Ÿ</p>
<hr />
<p>ä½ ä»¥ä¸ºçš„å¹¶ä¸æ˜¯ä½ ä»¥ä¸ºçš„</p>
<p><img src="images/chap0x08/broke-ops.gif" /></p>
<hr />
<p>å¦‚æœæ²¡æœ‰è‡ªåŠ¨åŒ–è¿ç»´ï¼Œä½ å¯èƒ½åœ¨æ—…é€”ä¸­çªç„¶éœ€è¦è¿™æ ·</p>
<p><img src="images/chap0x08/hard-opser.jpg" /></p>
<hr />
<p>æ²»å¤§å›½å¦‚çƒ¹å°è™¾ï¼Œæˆ‘ä»¬æ¥ç±»æ¯”é¤å…è€æ¿ï¼Œçœ‹å¦‚ä½•å®ç°ç‚’èœçš„è‡ªåŠ¨åŒ–</p>
<ul>
<li>é¦–å…ˆï¼Œæˆ‘è¦çŸ¥é“æˆ‘çš„å¨æˆ¿é‡Œåˆ°åº•æœ‰äº›ä»€ä¹ˆä¸œè¥¿æ˜¯å¯ç”¨çš„ï¼Œæ¯”å¦‚å¤‡äº†å“ªäº›èœï¼Œæœ‰é‚£äº›å·¥å…·ï¼Œè¿™äº›å°±æ˜¯<strong><em>é…ç½®ç®¡ç†</em></strong>ã€‚</li>
<li>æ­¤å¤–ï¼Œæˆ‘è¦è®©ç³»ç»Ÿå¸®æˆ‘å»åšèœï¼Œæ˜¯ç‚’ã€æ˜¯ç‚–è¿˜æ˜¯ç…®ï¼Ÿæ˜¯åŠ æ°´ã€åŠ æ²¹è¿˜æ˜¯åŠ ç«ï¼Œè¿™äº›éƒ½æ˜¯<strong><em>å˜æ›´ç®¡ç†</em></strong>çš„èƒ½åŠ›ã€‚</li>
<li>æœ€åï¼Œç³»ç»Ÿè¿˜éœ€è¦èƒ½å¤ŸçŸ¥é“æˆ‘ç‚’çš„èœç›®å‰æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„æƒ…å†µï¼Œæœ‰å‡ åˆ†ç†Ÿï¼Œæ¸©åº¦æœ‰æ²¡æœ‰å¤ªé«˜ï¼Œæ²¹æ˜¯ä¸æ˜¯å¤ªå°‘ä»€ä¹ˆçš„ã€‚è¿™äº›å°±æ˜¯<strong><em>çŠ¶æ€ç®¡ç†</em></strong>çš„èƒ½åŠ›ã€‚</li>
</ul>
<h1 id="ä¸ºä»€ä¹ˆéœ€è¦æŒç»­é›†æˆ">ä¸ºä»€ä¹ˆéœ€è¦æŒç»­é›†æˆï¼Ÿ</h1>
<hr />
<p><a href="http://coolshell.cn/articles/1174.html">ä¸‹é¢æ˜¯ç¨‹åºå‘˜æ—¥å¸¸å·¥ä½œå½“ä¸­æƒ¯ç”¨çš„è§£é‡Šï¼Œçœ‹çœ‹ä½ æœ‰æ²¡æœ‰èººæªï¼Ÿ</a></p>
<ol type="1">
<li>åœ¨æˆ‘è¿™è¾¹çš„ç”µè„‘ä¸Šå¯ä»¥å·¥ä½œå•Šâ€¦â€¦</li>
<li>æˆ‘é‡æ¥æ²¡æœ‰å¬è¿‡è¿™æ ·çš„äº‹</li>
<li><strong>æ˜¨å¤©è¿˜èƒ½æ­£å¸¸å·¥ä½œå‘¢</strong></li>
<li>å¥½å§ï¼Œè¿™ç®—ä¸€ä¸ªBUG</li>
<li>è¿™æ€ä¹ˆå¯èƒ½ï¼Ÿ</li>
<li>è¿™åº”è¯¥æ˜¯æœºå™¨æˆ–æ˜¯ç¯å¢ƒçš„é—®é¢˜</li>
<li>æ“ä½œç³»ç»Ÿæ›´æ–°äº†å—ï¼Ÿ</li>
<li>ä¸€å®šåˆæ˜¯ç”¨æˆ·é‚£è¾¹çš„é”™</li>
<li>ä½ çš„æµ‹è¯•æ•°æ®ä¸€å®šæœ‰é—®é¢˜</li>
<li>æˆ‘ä»æ¥æ²¡æœ‰ç¢°è¿‡é‚£è¾¹çš„ä»£ç ï¼</li>
</ol>
<hr />
<ul>
<li>æ˜¨å¤©å’Œä»Šå¤©ç›¸æ¯”å‘ç”Ÿäº†å“ªäº›â€œå˜åŒ–â€ï¼Ÿ</li>
<li>è¿™äº›å˜åŒ–æœ‰æ²¡æœ‰è¢«åŠæ—¶â€œæµ‹è¯•â€è¿‡ï¼Ÿ</li>
<li>é™¤äº†<strong>ä»£ç </strong>æœ‰å¯èƒ½è¢«è‡ªå·±äººâ€œå˜åŒ–â€äº†ï¼Œè½¯ä»¶ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“ã€æ“ä½œç³»ç»Ÿæœ‰æ²¡æœ‰â€œæ‚„æ‚„å‡çº§â€ï¼Ÿå‡çº§åè¿˜èƒ½å…¼å®¹â€œæ—§â€çš„ä»£ç å—ï¼Ÿ</li>
<li>æŒç»­é›†æˆå¯ä»¥â€œå°½æ—©æš´éœ²â€è½¯ä»¶å’Œç³»ç»Ÿå¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼Œåœ¨æ­£å¼å‘å¸ƒå’Œäº¤ä»˜ä¹‹å‰å¯ä»¥æœ‰æœºä¼šè§£å†³è¿™äº›é—®é¢˜</li>
</ul>
<h1 id="devopsjargons">DevOpsç›¸å…³å¸¸è§æœ¯è¯­</h1>
<hr />
<ul>
<li>æŒç»­é›†æˆï¼ˆContinuous Integration, CIï¼‰</li>
<li>æŒç»­äº¤ä»˜ï¼ˆContinuous Delivery, CDï¼‰</li>
<li>æŒç»­éƒ¨ç½²ï¼ˆContinuous Deploymentï¼‰</li>
<li>ä¸Šçº¿ä¸å›æ»š</li>
<li>ç°åº¦å‘å¸ƒ</li>
<li>A/Bæµ‹è¯•</li>
</ul>
<hr />
<h2 id="æŒç»­é›†æˆ">æŒç»­é›†æˆ</h2>
<p><img src="images/chap0x08/ci-demo.png" /></p>
<p>æŒç»­é›†æˆå¼ºè°ƒå¼€å‘äººå‘˜æäº¤äº†æ–°ä»£ç ä¹‹åï¼Œç«‹åˆ»è¿›è¡Œæ„å»ºã€ï¼ˆå•å…ƒï¼‰æµ‹è¯•ã€‚æ ¹æ®æµ‹è¯•ç»“æœï¼Œå¼€å‘äººå‘˜å¯ä»¥ç¡®å®šæ–°ä»£ç å’ŒåŸæœ‰ä»£ç èƒ½å¦æ­£ç¡®åœ°é›†æˆåœ¨ä¸€èµ·ã€‚</p>
<hr />
<h2 id="æŒç»­äº¤ä»˜">æŒç»­äº¤ä»˜</h2>
<p><img src="images/chap0x08/cd-demo.png" /></p>
<hr />
<p>æŒç»­äº¤ä»˜åœ¨æŒç»­é›†æˆçš„åŸºç¡€ä¸Šï¼Œå°†é›†æˆåçš„ä»£ç éƒ¨ç½²åˆ°æ›´è´´è¿‘çœŸå®è¿è¡Œç¯å¢ƒçš„<strong>ç±»ç”Ÿäº§ç¯å¢ƒ</strong>ï¼ˆ<strong><em>production-like environments</em></strong>ï¼‰ä¸­ã€‚</p>
<p>æ¯”å¦‚ï¼Œå¼€å‘äººå‘˜å®Œæˆå•å…ƒæµ‹è¯•åï¼Œå¯ä»¥æŠŠä»£ç éƒ¨ç½²åˆ°è¿æ¥æ•°æ®åº“çš„<strong>æ¨¡æ‹Ÿ</strong>ï¼ˆ<strong><em>Staging</em></strong>ï¼‰ç¯å¢ƒä¸­è¿›è¡Œæ›´å¤šçš„æµ‹è¯•ã€‚å¦‚æœä»£ç æ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥ç»§ç»­<strong><em><font color='red'>æ‰‹åŠ¨</font>éƒ¨ç½²</em></strong>åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p>
<hr />
<h2 id="æŒç»­éƒ¨ç½²">æŒç»­éƒ¨ç½²</h2>
<p><img src="images/chap0x08/cdeploy-demo.png" /></p>
<p>æŒç»­éƒ¨ç½²åˆ™æ˜¯åœ¨æŒç»­äº¤ä»˜çš„åŸºç¡€ä¸Šï¼ŒæŠŠéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„è¿‡ç¨‹<font color='red'>è‡ªåŠ¨</font>åŒ–ã€‚</p>
<hr />
<h2 id="ä¸Šçº¿ä¸å›æ»š">ä¸Šçº¿ä¸å›æ»š</h2>
<ul>
<li><strong>ä¸Šçº¿</strong>ï¼šè¿™æ˜¯ä¸€ç§å¾ˆå½¢è±¡çš„äº§å“å‘å¸ƒè¿‡ç¨‹å’Œç»“æœæè¿°ï¼Œå°¤å…¶åœ¨äº’è”ç½‘ã€ç‰©è”ç½‘æ¨¡å¼æµè¡Œçš„ä»Šå¤©ï¼Œå®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„æ˜¯è”ç½‘è½¯ä»¶çš„ä¸»æµé€šä¿¡æ¨¡å‹ã€‚ä¸¥æ ¼æ¥è¯´ï¼Œæœ¬ç« è®¨è®ºçš„<strong>ä¸Šçº¿</strong>ä¸»è¦æŒ‡çš„æ˜¯æœåŠ¡å™¨è½¯ä»¶çš„<strong>éƒ¨ç½²</strong>ã€‚</li>
<li><strong>å›æ»š</strong>ï¼šè½¯ä»¶åœ¨<strong>ä¸Šçº¿</strong>ä¹‹åå¯èƒ½ä¼šé‡åˆ°ä¸€äº›ä¸¥é‡bugå¹¶å½±å“åˆ°äº§å“åŸºæœ¬åŠŸèƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œä»åº”æ€¥å“åº”è§’åº¦å‡ºå‘ï¼Œå¾€å¾€ä¼šä½¿ç”¨æœ€è¿‘ä¸€ä¸ªè¢«è¯æ˜å¯ç”¨ç‰ˆæœ¬çš„è½¯ä»¶ï¼ˆä»£ç ï¼‰æ¥æ›¿ä»£å­˜åœ¨bugçš„è½¯ä»¶ã€‚å¦‚æœè¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿåœ¨äº§å“åˆšåˆšä¸Šçº¿ï¼Œåˆ™æŠŠè¿™ä¸ªå›é€€åˆ°æ—§ç‰ˆæœ¬è½¯ä»¶çš„æ“ä½œç§°ä¸º<strong>å›æ»š</strong>ã€‚</li>
</ul>
<hr />
<h2 id="ç°åº¦å‘å¸ƒ">ç°åº¦å‘å¸ƒ</h2>
<ul>
<li>ç°åº¦ï¼šæŠŠé»‘è‰²å®šä¸ºåŸºæœ¬è‰²ï¼Œæ¯ä¸ªç°åº¦å¯¹è±¡éƒ½æ˜¯0%ï¼ˆç™½è‰²ï¼‰åˆ°100%ï¼ˆé»‘è‰²ï¼‰çš„ä¸­é—´å€¼ï¼Œç®€è€Œè¨€ä¹‹ï¼Œç°åº¦å°±æ˜¯ä¸é¥±å’Œçš„é»‘è‰²ã€‚</li>
<li>ç°åº¦å‘å¸ƒï¼šæ˜¯æŒ‡åœ¨é»‘ä¸ç™½ä¹‹é—´ï¼Œèƒ½å¤Ÿå¹³æ»‘è¿‡æ¸¡çš„ä¸€ç§å‘å¸ƒæ–¹å¼ã€‚
<ul>
<li>ä»¥äº’è”ç½‘äº§å“ä¸ºä¾‹ï¼Œåªè¦äº§å“æ²¡æœ‰è¢«æ”¾å¼ƒè¿˜åœ¨ç»§ç»­æä¾›æœåŠ¡ï¼Œå°±ä¼šä¸åœçš„å‡çº§ï¼Œå‡çº§ï¼Œå†å‡çº§ã€‚</li>
<li>ç³»ç»Ÿå‡çº§æ€»æ˜¯ä¼´éšç€é£é™©ï¼šæ–°æ—§ç‰ˆæœ¬å…¼å®¹çš„é£é™©ï¼Œç”¨æˆ·ä½¿ç”¨ä¹ æƒ¯çªç„¶æ”¹å˜è€Œé€ æˆç”¨æˆ·æµå¤±çš„é£é™©ï¼Œç³»ç»Ÿdownæœºçš„é£é™©ç­‰ç­‰ã€‚
<ul>
<li>ä¸ºäº†é¿å…è¿™äº›é£é™©ï¼Œå¾ˆå¤šäº§å“éƒ½é‡‡ç”¨äº†<strong>ç°åº¦å‘å¸ƒ</strong>çš„ç­–ç•¥ï¼Œå…¶ä¸»è¦æ€æƒ³å°±æ˜¯ï¼šæŠŠå½±å“é›†ä¸­åˆ°ä¸€ä¸ªç‚¹ï¼Œç„¶åå†å‘æ•£åˆ°ä¸€ä¸ªé¢ï¼Œå‡ºç°æ„å¤–æƒ…å†µåå¾ˆå®¹æ˜“å°±<strong>å›æ»š</strong>ã€‚</li>
</ul></li>
</ul></li>
</ul>
<hr />
<h2 id="abæµ‹è¯•">A/Bæµ‹è¯•</h2>
<ul>
<li>A/Bæµ‹è¯•å°±æ˜¯ç°åº¦å‘å¸ƒçš„å…¶ä¸­ä¸€ç§å¸¸ç”¨æ–¹å¼ï¼Œè®©ä¸€éƒ¨åˆ†ç”¨æˆ·ç»§ç»­ç”¨Aï¼Œä¸€éƒ¨åˆ†ç”¨æˆ·å¼€å§‹ç”¨Bï¼Œå¦‚æœç”¨æˆ·å¯¹Bæ²¡æœ‰ä»€ä¹ˆåå¯¹æ„è§ï¼Œé‚£ä¹ˆé€æ­¥æ‰©å¤§èŒƒå›´ï¼ŒæŠŠæ‰€æœ‰ç”¨æˆ·éƒ½è¿ç§»åˆ°Bä¸Šé¢æ¥ã€‚</li>
</ul>
<hr />
<ul>
<li>æ— è®ºæ˜¯ç°åº¦å‘å¸ƒã€A/Bæµ‹è¯•è¿˜æ˜¯æ­£å¼ä¸Šçº¿ï¼Œå¯¹äºè½¯ä»¶çš„ä¸Šçº¿å’Œå›æ»šæµç¨‹æ¥è¯´ï¼Œä»¥ä¸‹éœ€æ±‚å§‹ç»ˆå­˜åœ¨ï¼š
<ul>
<li>å¯ä»¥è¿½è¸ªå’Œç®¡ç†ä¸Šçº¿è½¯ä»¶ç‰ˆæœ¬ï¼Œæ”¯æŒä¸åŒç‰ˆæœ¬ç³»ç»Ÿå¯¹åº”ä»£ç çš„å¹³æ»‘åˆ‡æ¢ï¼›</li>
<li>åœ¨äº§å“ï¼ˆåŒ…æ‹¬ç°åº¦å‘å¸ƒå’Œæ­£å¼å‘å¸ƒï¼‰å‘å¸ƒä¹‹å‰èƒ½å¤Ÿåœ¨ä¸€ä¸ªå¯ä¿¡å¯æ§ç¯å¢ƒæ¨¡æ‹Ÿçº¿ä¸Šç”Ÿäº§ç¯å¢ƒè¿›è¡Œæµ‹è¯•ï¼›
<ul>
<li>å®¢æˆ·è”ç½‘ç¯å¢ƒæ¨¡æ‹Ÿ</li>
<li>å¤šå®¢æˆ·ç«¯ç‰ˆæœ¬å…±å­˜ç¯å¢ƒæ¨¡æ‹Ÿ</li>
</ul></li>
<li>å¼€å‘å·¥ç¨‹å¸ˆä¸èƒ½ç›´æ¥æ¥è§¦ç”Ÿäº§ç¯å¢ƒçš„ç”¨æˆ·æœºå¯†å’Œéšç§æ•°æ®ï¼Œä½†åˆéœ€è¦ç»™å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒæä¾›å°½å¯èƒ½â€œçœŸå®â€çš„ç”¨æˆ·æ•°æ®ç”¨äºå¼€å‘è°ƒè¯•å’Œå‘å¸ƒå‰æµ‹è¯•ï¼›</li>
</ul></li>
</ul>
<h1 id="æ»šåŠ¨æ›´æ–°ä¸å›ºå®šç‰ˆæœ¬linuxä¹‹äº‰"><a href="https://linuxstory.org/rolling-release-vs-fixed-release-linux/">æ»šåŠ¨æ›´æ–°ä¸å›ºå®šç‰ˆæœ¬Linuxä¹‹äº‰</a></h1>
<hr />
<ul>
<li>Gentoo Linux ä½œä¸ºæœ€å¤è€çš„æ´»è·ƒ Linux å‘è¡Œç‰ˆæœ¬å’Œ Google çš„ Chrome OS çš„è¡ç”Ÿæ¥æºç‰ˆæœ¬ï¼Œå®ƒå·²ç»é‡‡ç”¨<strong>æ»šåŠ¨æ›´æ–°</strong>ï¼ˆ<strong><em>Rolling Update</em></strong>ï¼‰æ–¹å¼è¿‘15å¹´äº†ã€‚
<ul>
<li><a href="https://www.kali.org/news/kali-linux-rolling-edition-2016-1/">Kali Linuxä»2016å¹´1æœˆå¼€å§‹åŸºäºDebianä½¿ç”¨æ»šåŠ¨æ›´æ–°æ–¹å¼ç»´æŠ¤å‡çº§</a></li>
</ul></li>
<li>å›ºå®šå‘è¡Œä¾ç„¶æ˜¯ç›®å‰é¢å‘ä¼ä¸šçº§äº§å“æœ€ä¸»è¦çš„å‘è¡Œæ¨¡å‹ã€‚åœ¨å›ºå®šå‘è¡Œä¸­ï¼ŒåŒ…å«å®‰å…¨æ›´æ–°å’Œå°çš„è°ƒæ•´çš„å‘è¡Œç‰ˆæœ¬æ˜¯æœ‰è®¡åˆ’çš„ã€‚
<ul>
<li>Canonical ç»´æŠ¤ Ubuntu Linux</li>
<li>Red Hat ç»´æŠ¤ Red Hat Enterprise Linux (RHEL)</li>
<li>SUSE ç»´æŠ¤ SUSE Linux Enterprise Server (SLES)</li>
</ul></li>
</ul>
<hr />
<ul>
<li>è½¯ä»¶å’Œè½¯ä»¶å·¥ç¨‹æœ¬èº«çš„å¤æ‚æ€§å†³å®šäº†<strong>æ»šåŠ¨æ›´æ–°</strong>æ–¹å¼åœ¨è½¯ä»¶å…¼å®¹æ€§æ–¹é¢å°†é¢ä¸´å·¨å¤§æŒ‘æˆ˜ï¼›</li>
<li><strong>å›ºå®šå‘è¡Œ</strong>æ–¹å¼çš„ä¼˜åŠ¿å°±åœ¨äºå¯ä»¥åŸºäºä¸€ä¸ªç›¸å¯¹ç¨³å®šçš„ä»£ç åˆ†æ”¯è¿›è¡Œ<strong><em>å°èŒƒå›´</em></strong>çš„ä¿®ä¿®è¡¥è¡¥ï¼Œä½¿å¾—è½¯ä»¶çš„å¯æµ‹è¯•æ€§æ›´å¥½ï¼Œç†è®ºä¸Šå°†æä¾›æ›´å¥½çš„ç¨³å®šæ€§ã€‚</li>
</ul>
<h1 id="ä¸»æµæŠ€æœ¯å·¥å…·é“¾">ä¸»æµæŠ€æœ¯å·¥å…·é“¾</h1>
<hr />
<ul>
<li>gitï¼ˆgithub/gitlabï¼‰</li>
<li>ansibleï¼ˆpuppetã€chefã€saltç­‰ï¼‰</li>
<li>dockerï¼ˆdockerfile/k8s/dockerhubï¼‰</li>
<li>jenkins / travis / Gitlab CI</li>
<li>openstackï¼ˆKVMã€Xenï¼‰</li>
<li>openvswitch</li>
<li>tcpreplay + tcpcopy</li>
</ul>
<h1 id="git">git</h1>
<hr />
<blockquote>
<p>Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.</p>
</blockquote>
<p>è§£å†³ä»£ç å’Œæ–‡æ¡£çš„ç‰ˆæœ¬ç®¡ç†ã€å¤šäººåä½œå¼€å‘ä¸ç¼–è¾‘éœ€æ±‚ã€‚</p>
<hr />
<h2 id="gitlab">GitLab</h2>
<blockquote>
<p>Provides Git repository management, code reviews, issue tracking, activity feeds and wikis. GitLab itself is also free software.</p>
</blockquote>
<h1 id="ansible"><a href="https://www.ansible.com">ansible</a></h1>
<hr />
<blockquote>
<p>Deploy apps. Manage systems. Crush complexity. Ansible helps you build a strong foundation for DevOps.</p>
</blockquote>
<p>æä¾›å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒçš„è½¯ä»¶å®šä¹‰èƒ½åŠ›ï¼Œæ»¡è¶³ä»£ç è¿è¡Œç¯å¢ƒä¸€è‡´æ€§ã€å¯å®¡è®¡ã€è‡ªåŠ¨åŒ–ç­‰éœ€æ±‚ã€‚</p>
<h1 id="ansible-quickstart">åˆ†åˆ†é’Ÿä¸Šæ‰‹Ansible</h1>
<hr />
<h2 id="ansible-install">å®‰è£…Ansible</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a>$ <span class="fu">sudo</span> apt-get install ansible</span></code></pre></div>
<hr />
<h2 id="agentlesspush-vs.-agentpull">agentless+push VS. agent+pull</h2>
<p><a href="https://wiredcraft.com/blog/getting-started-with-ansible-in-5-minutes/"><img src="images/chap0x08/ansible_push.png" /></a> <a href="https://wiredcraft.com/blog/getting-started-with-ansible-in-5-minutes/"><img src="images/chap0x08/ansible_agentless.png" /></a></p>
<hr />
<p><a href="https://www.chef.io/chef/">Chef</a>å’Œ<a href="https://puppet.com/">Puppet</a>æ˜¯DevOpsé¢†åŸŸçš„å¦2æ¬¾é‡é‡çº§è§£å†³æ–¹æ¡ˆï¼Œè¿™2ä¸ªæ–¹æ¡ˆçš„å…±åŒç‚¹æ˜¯é‡‡ç”¨äº†ï¼šï¼ˆè¢«ç®¡ç†ä¸»æœºä¸Šå®‰è£…ï¼‰ä»£ç†ï¼ˆagentï¼‰è½¯ä»¶å’Œæ‹‰å–ï¼ˆpullï¼‰æ¨¡å‹ã€‚ä»£ç†è½¯ä»¶æŒ‰ç…§é¢„å…ˆé…ç½®çš„ç­–ç•¥é€šè¿‡ç§æœ‰ä¼ è¾“åè®®ä»ç®¡ç†ä¸»æœºä¸Šæ‹‰å–é…ç½®å˜æ›´åˆ°æœ¬åœ°åº”ç”¨ã€‚</p>
<p>ansibleåˆ™é‡‡ç”¨äº†æˆªç„¶ç›¸åçš„ä¸€ç§å·¥ä½œæ¨¡å‹ï¼š<strong>agentless</strong>å’Œ<strong>push</strong>ã€‚å¹¶ä¸”ï¼Œansibleä½¿ç”¨SSHé€šé“æ¥å®ç°è¿œç¨‹ç®¡ç†å’Œå‘½ä»¤æ‰§è¡Œã€‚</p>
<hr />
<p><a href="https://en.wikipedia.org/wiki/Idempotence">å¹‚ç­‰æ€§ Idempotence</a>: åŒä¸€ä¸ªæ“ä½œæ‰§è¡Œä¸¤æ¬¡æˆ–æ›´å¤šæ¬¡ä¸ä¼šæ”¹å˜ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„ç»“æœã€‚</p>
<p>ansibleçš„å¤§éƒ¨åˆ†å‘½ä»¤ã€æ¨¡å—å’Œæ“ä½œéƒ½èƒ½ä¿è¯ä¸Šè¿°<strong>å¹‚ç­‰æ€§</strong>ã€‚</p>
<h1 id="ansible-helloworld">ä½“éªŒAnsible</h1>
<hr />
<h2 id="ä½“éªŒç¯å¢ƒå‡†å¤‡">ä½“éªŒç¯å¢ƒå‡†å¤‡</h2>
<ul>
<li>ä¸¤å°Virtualboxè™šæ‹Ÿæœºï¼Œé‡‡ç”¨Host-onlyæ–¹å¼ç›´è¿
<ul>
<li>å®‰è£…ansibleçš„è™šæ‹Ÿæœºæˆ‘ä»¬ç”¨Aè¡¨ç¤ºï¼Œæ²¡æœ‰å®‰è£…ansibleçš„è™šæ‹Ÿæœºæˆ‘ä»¬ç”¨Bè¡¨ç¤º</li>
<li>å‡è®¾Açš„IPï¼š192.168.56.102ï¼ŒBçš„IPï¼š192.168.56.101</li>
</ul></li>
<li>ä½¿ç”¨ç¬¬ä¸€ç« çš„æ™®é€šç”¨æˆ·SSHå…å¯†ç™»é™†é…ç½®æ–¹æ³•ï¼Œé…ç½®ä»Aåˆ°Bçš„æ™®é€šç”¨æˆ·SSHå…å¯†ç™»å½•é…ç½®
<ul>
<li>å‡è®¾Aå’ŒBä¸Šéƒ½æœ‰æ™®é€šç”¨æˆ·cucï¼Œä¸”å‡å…·æœ‰å®Œæ•´sudoæƒé™</li>
</ul></li>
<li>è¿œç¨‹è¢«ç®¡ç†ä¸»æœºä¸Šéœ€è¦å®‰è£…python2/3</li>
</ul>
<hr />
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># é…ç½®A-&gt;Bçš„rootç”¨æˆ·å…å¯†SSHç™»å½•</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>$ <span class="ex">ssh-copy-id</span> -i ~/.ssh/id_rsa.pub cuc@192.168.56.101</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># SSHç™»å½•åˆ°Bä¸Šæ‰‹å·¥é…ç½®Aä¸Šcucç”¨æˆ·çš„RSAå…¬é’¥åˆ°Bä¸Šrootç”¨æˆ·çš„/root/.ssh/authorized_keys</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>$ <span class="fu">ssh</span> cuc@192.168.56.101 </span>
<span id="cb2-6"><a href="#cb2-6"></a>$ <span class="fu">sudo</span> mkdir /root/.ssh</span>
<span id="cb2-7"><a href="#cb2-7"></a>$ <span class="fu">sudo</span> cp /home/cuc/.ssh/authorized_keys /root/.ssh/authorized_keys</span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co"># å‡è®¾Bä¸Šæ²¡æœ‰å®‰è£…è¿‡python</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>$ <span class="fu">sudo</span> apt-get update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt-get install -y python-minimal</span>
<span id="cb2-10"><a href="#cb2-10"></a>$ <span class="bu">exit</span></span>
<span id="cb2-11"><a href="#cb2-11"></a></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co"># ç»§ç»­åœ¨Aä¸Šæ‰§è¡Œå‘½ä»¤</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co"># éªŒè¯A-&gt;Bçš„rootç”¨æˆ·å…å¯†SSHç™»å½•</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>$ <span class="fu">ssh</span> root@192.168.56.101</span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co"># exit</span></span>
<span id="cb2-16"><a href="#cb2-16"></a></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co"># å›åˆ°Aä¸Šç»§ç»­æ‰§è¡Œå‘½ä»¤</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co"># åˆ›å»ºä¸€ä¸ªansibleçš„æœ¬åœ°å·¥ä½œç›®å½•ï¼ˆå¯é€‰æ­¥éª¤ï¼‰</span></span>
<span id="cb2-19"><a href="#cb2-19"></a>$ <span class="fu">mkdir</span> ansible <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> ansible</span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="co"># hostsæ–‡ä»¶å†…å®¹å‚ç…§/etc/ansible/hostsçš„å†…å®¹æ ¼å¼</span></span>
<span id="cb2-21"><a href="#cb2-21"></a>$ <span class="bu">echo</span> -e <span class="st">&quot;[web]\n192.168.56.101&quot;</span> <span class="op">&gt;</span> hosts</span>
<span id="cb2-22"><a href="#cb2-22"></a>$ <span class="ex">ansible</span> all -m ping -u root -i hosts</span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="ex">192.168.56.101</span> <span class="kw">|</span> <span class="ex">SUCCESS</span> =<span class="op">&gt;</span> {</span>
<span id="cb2-24"><a href="#cb2-24"></a>    <span class="st">&quot;changed&quot;</span>: <span class="fu">false</span>,</span>
<span id="cb2-25"><a href="#cb2-25"></a>    <span class="st">&quot;ping&quot;</span>: <span class="st">&quot;pong&quot;</span></span>
<span id="cb2-26"><a href="#cb2-26"></a>}</span></code></pre></div>
<hr />
<ul>
<li>ä¸Šè¿°æ“ä½œè¿‡ç¨‹ä¸­åˆ›å»ºçš„æœ¬åœ°hostsæ–‡ä»¶ï¼Œåœ¨ansibleä¸­æœ‰ä¸€ä¸ªæœ¯è¯­ï¼Œå«åš<a href="http://docs.ansible.com/ansible/intro_inventory.html">inventory</a>ï¼Œç”¨æ¥å®šä¹‰å¯æ“ä½œçš„è¿œç¨‹ä¸»æœºä¿¡æ¯ã€‚</li>
</ul>
<h1 id="ansible-nginx">ç”¨ansibleæ¥ç»Ÿä¸€å®‰è£…é…ç½®nginx</h1>
<hr />
<p>ansibleä½¿ç”¨<a href="http://docs.ansible.com/ansible/playbooks.html">playbooks</a>æ¥å®šä¹‰è¿œç¨‹ç®¡ç†â€œè„šæœ¬â€ï¼Œplaybooksä½¿ç”¨YAMLè¯­æ³•ã€‚</p>
<p><a href="http://docs.ansible.com/ansible/playbooks_roles.html">role</a>æ˜¯ansibleä¸­ç”¨æ¥æŠ½è±¡<strong>å¯é‡ç”¨</strong>é…ç½®è„šæœ¬çš„æ¦‚å¿µã€‚é€šå¸¸ä¸€ä¸ªroleä¸­åŒ…æ‹¬<a href="http://docs.ansible.com/ansible/playbooks_variables.html">å˜é‡</a>ã€<a href="http://docs.ansible.com/ansible/playbooks_intro.html#tasks-list">ä»»åŠ¡</a>å’Œ<a href="http://docs.ansible.com/ansible/playbooks_intro.html#handlers-running-operations-on-change">å¥æŸ„</a>ã€‚</p>
<p><a href="https://galaxy.ansible.com/">Ansible Galaxy</a>æ˜¯ansibleå®˜æ–¹ç»´æŠ¤çš„ä¸€ä¸ªroleåˆ†äº«ç¤¾åŒºã€‚é€šè¿‡<a href="https://galaxy.ansible.com/list#/roles?page=1&amp;page_size=10&amp;autocomplete=nginx">åœ¨çº¿æœç´¢nginx</a>ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¿«å‘ç°è¿™ä¸ª<a href="https://galaxy.ansible.com/mrlesmithjr/nginx/">mrlesmithjr.nginx</a></p>
<hr />
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># ç¡®ä¿ä½ åœ¨å½“å‰ç”¨æˆ·å¯å†™çš„ç›®å½•ä¸­</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>$ <span class="fu">mkdir</span> roles</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co"># ä»¥ä¸‹å‘½ä»¤ä¼šåœ¨å½“å‰ç›®å½•çš„å­ç›®å½•rolesä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºjeqo.nginxçš„å­ç›®å½•</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>$ <span class="ex">ansible-galaxy</span> install mrlesmithjr.nginx -p roles</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co"># å¯ä»¥è¿›å…¥è¯¥ç›®å½•æŸ¥çœ‹è‡ªåŠ¨ä¸‹è½½å¥½çš„ä¸€ä¸ªnginx roleï¼ˆä¸€å †é…ç½®æ–‡ä»¶å’Œansibleè„šæœ¬ï¼‰</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co"># å¯ä»¥ cd roles/mrlesmithjr.nginx é‡ç‚¹æŸ¥çœ‹README.mdï¼Œè·å¾—ä½œè€…ç•™ç»™æˆ‘ä»¬çš„ç¬¬ä¸€æ‰‹å¸®åŠ©æ–‡æ¡£</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co"># ç”±äºå…¨æ˜¯è„šæœ¬ï¼Œæ‰€ä»¥æ–‡æ¡£è§£å†³ä¸äº†çš„é—®é¢˜å¯ä»¥ç›´æ¥æŸ¥çœ‹ä»£ç </span></span></code></pre></div>
<hr />
<p>å°†ä»¥ä¸‹å†…å®¹ç²˜è´´åˆ°ä¸Šè¿°å®éªŒä¸­rolesçš„çˆ¶çº§ç›®å½•ä¸­æ–°åˆ›å»ºçš„æ–‡ä»¶ï¼Œå‡è®¾æ–‡ä»¶åä¸º<code>deploy.yml</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb4-1"><a href="#cb4-1"></a><span class="dt">---</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="dt">- hosts: web</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="dt">  become: true</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="dt">  vars:</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="dt">  roles:</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="dt">    - role: mrlesmithjr.nginx</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="dt">  tasks:</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># æŠŠæœ¬åœ°çš„nginxé…ç½®â€œä»£ç â€åœ¨è¿œç¨‹ä¸»æœºä¸Šæ‰§è¡Œèµ·æ¥å§ï¼</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>$ <span class="ex">ansible-playbook</span> deploy.yml -i hosts -u root -v</span></code></pre></div>
<hr />
<p>éªŒè¯ä½ çš„ç¬¬ä¸€ä¸ªansible-playbookçš„æˆæœå§ï¼</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="ex">curl</span> http://192.168.56.101</span></code></pre></div>
<hr />
<p>â›”ï¸ ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒæˆ–å…¶ä»–é‡è¦ç¯å¢ƒä¸­<strong>ç›²ç›®</strong>ä¸‹è½½æ‰§è¡Œåˆ«äººçš„ä»£ç ï¼ï¼ï¼</p>
<p>â›”ï¸ ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒæˆ–å…¶ä»–é‡è¦ç¯å¢ƒä¸­<strong>ç›²ç›®</strong>ä¸‹è½½æ‰§è¡Œåˆ«äººçš„ä»£ç ï¼ï¼ï¼</p>
<p>â›”ï¸ ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒæˆ–å…¶ä»–é‡è¦ç¯å¢ƒä¸­<strong>ç›²ç›®</strong>ä¸‹è½½æ‰§è¡Œåˆ«äººçš„ä»£ç ï¼ï¼ï¼</p>
<p>âš ï¸ æˆ‘ä»¬<strong>æ‰€ä»¥</strong>é€‰æ‹©åœ¨ä¸€ä¸ª<strong><em>çº¯å‡€</em></strong>çš„è™šæ‹Ÿæœºç¯å¢ƒä¸­åšä¸Šè¿°å®éªŒï¼</p>
<hr />
<p><a href="ansible.md.html">ç•ªå¤–ï¼šAnsible</a></p>
<h1 id="docker"><a href="https://www.docker.com/">docker</a></h1>
<hr />
<blockquote>
<p>Build, Ship, and Run Any App, Anywhere</p>
</blockquote>
<p>Dockeræ˜¯ä¸€ç§è½»é‡è™šæ‹ŸåŒ–çš„å®¹å™¨æŠ€æœ¯ï¼Œæä¾›ç±»ä¼¼è™šæ‹Ÿæœºçš„éš”ç¦»åŠŸèƒ½ï¼Œå¹¶ä½¿ç”¨äº†ä¸€ç§åˆ†å±‚çš„è”åˆæ–‡ä»¶ç³»ç»ŸæŠ€æœ¯ç®¡ç†é•œåƒï¼Œèƒ½æå¤§ç®€åŒ–ç¯å¢ƒè¿ç»´è¿‡ç¨‹ã€‚</p>
<hr />
<p>Dockerå®¹å™¨äº‘åˆ™æ˜¯ä½¿ç”¨DockeræŠ€æœ¯æ‰“é€ çš„ä¸€ç«™å¼å®¹å™¨äº‘æœåŠ¡å¹³å°ï¼Œå³CaaSï¼ˆContainers as a Serviceï¼‰â€”â€”å®¹å™¨å³æœåŠ¡ï¼›å¯ä»¥å°†å®ƒç®€å•çœ‹ä½œä¸ºPaaSï¼ˆPlatform as a Serviceï¼‰çš„å‡çº§ç‰ˆï¼Œä½¿ç”¨Dockerå®¹å™¨æŠ€æœ¯çš„CaaSå¹³å°åŠŸèƒ½æ›´å¼ºå¤§ï¼Œä½¿ç”¨çµæ´»ï¼Œéƒ¨ç½²æ›´æ–¹ä¾¿ã€‚</p>
<hr />
<p>Docker å¯ä»¥è®©ä½ åƒä½¿ç”¨é›†è£…ç®±ä¸€æ ·å¿«é€Ÿçš„ç»„åˆæˆåº”ç”¨ï¼Œå¹¶ä¸”å¯ä»¥åƒè¿è¾“æ ‡å‡†é›†è£…ç®±ä¸€æ ·ï¼Œå°½å¯èƒ½çš„å±è”½ä»£ç å±‚é¢çš„å·®å¼‚ã€‚Docker ä¼šå°½å¯èƒ½çš„ç¼©çŸ­ä»ä»£ç æµ‹è¯•åˆ°äº§å“éƒ¨ç½²çš„æ—¶é—´ã€‚å¯¹äºDevOpsæ¥è¯´ï¼ŒDockerå¯ä»¥æä¾›è½¯ä»¶çš„ä¸€è‡´æ€§ã€å¯å®¡è®¡å’Œè‡ªåŠ¨åŒ–<strong>äº¤ä»˜</strong>èƒ½åŠ›ï¼Œä¸»åŠ¨è§„é¿è½¯ä»¶å¯¹æ“ä½œç³»ç»ŸåŠå…¶è¿è¡Œç¯å¢ƒç‰¹å®šç‰ˆæœ¬æˆ–ç»„åˆä¾èµ–æ€§æˆ–å…¼å®¹æ€§å¯èƒ½å¸¦æ¥çš„bugã€‚</p>
<h1 id="docker-quickstart">åˆ†åˆ†é’Ÿä¸Šæ‰‹Docker</h1>
<hr />
<p><a href="https://asciinema.org/a/voYA63mKW6MFOpBHgZhLs3xaP"><img src="https://asciinema.org/a/voYA63mKW6MFOpBHgZhLs3xaP.svg" alt="Docker é…ç½® Demo on Ubuntu 18.04" /></a></p>
<hr />
<h2 id="docker-install">å®‰è£…Docker</h2>
<p>ä»¥å®˜æ–¹æ–‡æ¡£ä¸ºå‡†: <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="fu">sudo</span> apt-get install apt-transport-https ca-certificates curl software-properties-common</span>
<span id="cb7-4"><a href="#cb7-4"></a></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co"># å¯¼å…¥Dockerå®˜æ–¹çš„GPG Key</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="ex">curl</span> -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="kw">|</span> <span class="fu">sudo</span> apt-key add -</span>
<span id="cb7-7"><a href="#cb7-7"></a></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co"># æ·»åŠ Dockerå®˜æ–¹é•œåƒæºåœ°å€</span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="fu">sudo</span> add-apt-repository \</span>
<span id="cb7-10"><a href="#cb7-10"></a>   <span class="st">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="st">   </span><span class="va">$(</span><span class="ex">lsb_release</span> -cs<span class="va">)</span><span class="st"> \</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="st">   stable&quot;</span></span>
<span id="cb7-13"><a href="#cb7-13"></a></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb7-15"><a href="#cb7-15"></a></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co"># ç¡®è®¤ä½ çš„é•œåƒæºé…ç½®æ˜¯æ­£ç¡®çš„ï¼šä»Dockerå®˜ç½‘ä¸‹è½½å®‰è£…æœ€æ–°ç‰ˆdockerï¼Œé¿å…ä»Ubuntuå®˜æ–¹é•œåƒæºä¸‹è½½æ—§ç‰ˆçš„docker</span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="ex">apt-cache</span> madison docker-ce</span>
<span id="cb7-18"><a href="#cb7-18"></a></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co"># docker-ce | 17.12.0~ce-0~ubuntu | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages</span></span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="co"># docker-ce | 17.09.1~ce-0~ubuntu | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages</span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="co"># docker-ce | 17.09.0~ce-0~ubuntu | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages</span></span>
<span id="cb7-22"><a href="#cb7-22"></a><span class="co">#  ...</span></span>
<span id="cb7-23"><a href="#cb7-23"></a><span class="co"># docker-ce | 17.03.1~ce-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages</span></span>
<span id="cb7-24"><a href="#cb7-24"></a><span class="co"># docker-ce | 17.03.0~ce-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages</span></span>
<span id="cb7-25"><a href="#cb7-25"></a></span>
<span id="cb7-26"><a href="#cb7-26"></a><span class="co"># å®‰è£…docker </span></span>
<span id="cb7-27"><a href="#cb7-27"></a>$ <span class="fu">sudo</span> apt-get install -y docker-ce</span>
<span id="cb7-28"><a href="#cb7-28"></a></span>
<span id="cb7-29"><a href="#cb7-29"></a><span class="co"># æ£€æŸ¥dockerå®ˆæŠ¤è¿›ç¨‹æ˜¯å¦å·²è‡ªåŠ¨å¯åŠ¨</span></span>
<span id="cb7-30"><a href="#cb7-30"></a>$ <span class="fu">sudo</span> systemctl status docker</span>
<span id="cb7-31"><a href="#cb7-31"></a>â— <span class="ex">docker.service</span> - Docker Application Container Engine</span>
<span id="cb7-32"><a href="#cb7-32"></a>   <span class="ex">Loaded</span>: loaded (/lib/systemd/system/docker.service<span class="kw">;</span> <span class="ex">enabled</span><span class="kw">;</span> <span class="ex">vendor</span> preset: enabled)</span>
<span id="cb7-33"><a href="#cb7-33"></a>   <span class="ex">Active</span>: active (running) <span class="ex">since</span> Wed 2017-02-15 14:44:43 CST<span class="kw">;</span> <span class="ex">7min</span> ago</span>
<span id="cb7-34"><a href="#cb7-34"></a>     <span class="ex">Docs</span>: https://docs.docker.com</span>
<span id="cb7-35"><a href="#cb7-35"></a> <span class="ex">Main</span> PID: 1464 (dockerd)</span>
<span id="cb7-36"><a href="#cb7-36"></a>    <span class="ex">Tasks</span>: 16</span>
<span id="cb7-37"><a href="#cb7-37"></a>   <span class="ex">Memory</span>: 50.5M</span>
<span id="cb7-38"><a href="#cb7-38"></a>      <span class="ex">CPU</span>: 441ms</span>
<span id="cb7-39"><a href="#cb7-39"></a>   <span class="ex">CGroup</span>: /system.slice/docker.service</span>
<span id="cb7-40"><a href="#cb7-40"></a>           â”œâ”€<span class="ex">1464</span> /usr/bin/dockerd -H fd://</span>
<span id="cb7-41"><a href="#cb7-41"></a>           â””â”€<span class="ex">1622</span> containerd -l unix:///var/run/docker/libcontainerd/docker-containerd.sock --shim containerd-shim --metrics-interval=0 --sta</span></code></pre></div>
<h1 id="docker-concepts">DockeråŸºæœ¬æ¦‚å¿µ</h1>
<hr />
<h2 id="è™šæ‹Ÿæœº-vs.-å®¹å™¨">è™šæ‹Ÿæœº VS. å®¹å™¨</h2>
<p><img src="images/chap0x08/DockerVSVM.png" /></p>
<blockquote>
<p>æ³¨æ„ï¼šDockeråªæ˜¯å®¹å™¨æŠ€æœ¯ç›®å‰æœ€â€œç«â€çš„ä¸€ç§ï¼ŒDockerä¸æ˜¯å®¹å™¨æŠ€æœ¯çš„ä»£åè¯ï¼Œåªæ˜¯æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>
</blockquote>
<hr />
<h2 id="container-arch">Linuxå®¹å™¨æ¶æ„</h2>
<p><img src="images/chap0x08/LinuxContainerEcosystem.png" /></p>
<hr />
<h2 id="docker-lifecycle">Dockerç”Ÿå‘½å‘¨æœŸ</h2>
<p><a href="https://segmentfault.com/a/1190000000751601"><img src="images/chap0x08/docker-lifecycle.png" /></a></p>
<hr />
<h2 id="å¯¹è±¡ç±»æ¦‚å¿µ">å¯¹è±¡ç±»æ¦‚å¿µ</h2>
<ul>
<li><a href="https://docs.docker.com/engine/getstarted/step_two/">Image</a>: é•œåƒ</li>
<li>Container: å®¹å™¨</li>
<li><a href="https://docs.docker.com/engine/getstarted/step_four/">Dockerfile</a></li>
<li>Local Docker instance</li>
<li>Docker registry</li>
</ul>
<hr />
<blockquote>
<p>An <strong><em>image</em></strong> is a filesystem and parameters to use at runtime. It doesnâ€™t have state and never changes. A <strong><em>container</em></strong> is a running instance of an image.</p>
</blockquote>
<p>é•œåƒå¯ä»¥ç±»æ¯” VirtualBox çš„åŸºç¡€é•œåƒæ¦‚å¿µï¼Œå®¹å™¨å¯ä»¥ç±»æ¯” VirtualBox çš„å·®åˆ†å¢é‡é•œåƒã€‚</p>
<blockquote>
<p>A <strong><em>Dockerfile</em></strong> is a recipe which describes the files, environment, and commands that make up an image.</p>
</blockquote>
<p>Dockerfileå¯ä»¥ç±»æ¯”Makefileã€‚</p>
<hr />
<p>Local Docker instanceå¯ä»¥ç±»æ¯”æœ¬åœ°çš„Virtualboxå¼•æ“ã€‚</p>
<p>Docker registryç›¸å½“äºgitä»“åº“ï¼ŒDockerå®˜æ–¹çš„Docker Hubç›¸å½“äºGithubã€‚</p>
<hr />
<h2 id="æ“ä½œç±»æ¦‚å¿µ">æ“ä½œç±»æ¦‚å¿µ</h2>
<ul>
<li>ç±»æ¯”VSçš„åŒåèœå•å‘½ä»¤ï¼ˆè¾“å…¥æ˜¯Dockerfileï¼‰
<ul>
<li>build</li>
</ul></li>
<li>ç±»æ¯”gitçš„åŒåå­å‘½ä»¤
<ul>
<li><a href="https://docs.docker.com/engine/getstarted/step_six/">tag</a></li>
<li>commit</li>
<li>push</li>
<li>pull</li>
</ul></li>
<li>ç±»æ¯”systemdçš„åŒåå­å‘½ä»¤
<ul>
<li>run</li>
<li>stop</li>
<li>start</li>
<li>restart</li>
</ul></li>
</ul>
<h1 id="docker-cli">ä½¿ç”¨å‘½ä»¤è¡Œæ§åˆ¶Docker</h1>
<hr />
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1"></a>$ <span class="fu">sudo</span> docker version</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="ex">Client</span>:</span>
<span id="cb8-3"><a href="#cb8-3"></a> <span class="ex">Version</span>:   17.12.0-ce</span>
<span id="cb8-4"><a href="#cb8-4"></a> <span class="ex">API</span> version:   1.35</span>
<span id="cb8-5"><a href="#cb8-5"></a> <span class="ex">Go</span> version:    go1.9.2</span>
<span id="cb8-6"><a href="#cb8-6"></a> <span class="ex">Git</span> commit:    c97c6d6</span>
<span id="cb8-7"><a href="#cb8-7"></a> <span class="ex">Built</span>: Wed Dec 27 20:11:19 2017</span>
<span id="cb8-8"><a href="#cb8-8"></a> <span class="ex">OS</span>/Arch:   <span class="ex">linux/amd64</span></span>
<span id="cb8-9"><a href="#cb8-9"></a></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="ex">Server</span>:</span>
<span id="cb8-11"><a href="#cb8-11"></a> <span class="ex">Engine</span>:</span>
<span id="cb8-12"><a href="#cb8-12"></a>  <span class="ex">Version</span>:  17.12.0-ce</span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="ex">API</span> version:  1.35 (minimum version 1.12)</span>
<span id="cb8-14"><a href="#cb8-14"></a>  <span class="ex">Go</span> version:   go1.9.2</span>
<span id="cb8-15"><a href="#cb8-15"></a>  <span class="ex">Git</span> commit:   c97c6d6</span>
<span id="cb8-16"><a href="#cb8-16"></a>  <span class="ex">Built</span>:    Wed Dec 27 20:09:53 2017</span>
<span id="cb8-17"><a href="#cb8-17"></a>  <span class="ex">OS</span>/Arch:  <span class="ex">linux/amd64</span></span>
<span id="cb8-18"><a href="#cb8-18"></a>  <span class="ex">Experimental</span>: false</span>
<span id="cb8-19"><a href="#cb8-19"></a></span>
<span id="cb8-20"><a href="#cb8-20"></a>$ <span class="fu">sudo</span> docker</span>
<span id="cb8-21"><a href="#cb8-21"></a></span>
<span id="cb8-22"><a href="#cb8-22"></a><span class="ex">Usage</span>:  docker COMMAND</span>
<span id="cb8-23"><a href="#cb8-23"></a></span>
<span id="cb8-24"><a href="#cb8-24"></a><span class="ex">A</span> self-sufficient runtime for containers</span>
<span id="cb8-25"><a href="#cb8-25"></a></span>
<span id="cb8-26"><a href="#cb8-26"></a><span class="ex">Options</span>:</span>
<span id="cb8-27"><a href="#cb8-27"></a>      <span class="ex">--config</span> string      Location of client config files (default <span class="st">&quot;/home/cuc/.docker&quot;</span>)</span>
<span id="cb8-28"><a href="#cb8-28"></a>  <span class="ex">-D</span>, --debug              Enable debug mode</span>
<span id="cb8-29"><a href="#cb8-29"></a>  <span class="ex">-H</span>, --host list          Daemon socket(s) <span class="ex">to</span> connect to</span>
<span id="cb8-30"><a href="#cb8-30"></a>  <span class="ex">-l</span>, --log-level string   Set the logging level (<span class="st">&quot;debug&quot;</span><span class="kw">|</span><span class="st">&quot;info&quot;</span><span class="kw">|</span><span class="st">&quot;warn&quot;</span><span class="kw">|</span><span class="st">&quot;error&quot;</span><span class="kw">|</span><span class="st">&quot;fatal&quot;</span>) <span class="kw">(</span><span class="ex">default</span> <span class="st">&quot;info&quot;</span><span class="kw">)</span></span>
<span id="cb8-31"><a href="#cb8-31"></a>      <span class="ex">--tls</span>                Use TLS<span class="kw">;</span> <span class="ex">implied</span> by --tlsverify</span>
<span id="cb8-32"><a href="#cb8-32"></a>      <span class="ex">--tlscacert</span> string   Trust certs signed only by this CA (default <span class="st">&quot;/home/cuc/.docker/ca.pem&quot;</span>)</span>
<span id="cb8-33"><a href="#cb8-33"></a>      <span class="ex">--tlscert</span> string     Path to TLS certificate file (default <span class="st">&quot;/home/cuc/.docker/cert.pem&quot;</span>)</span>
<span id="cb8-34"><a href="#cb8-34"></a>      <span class="ex">--tlskey</span> string      Path to TLS key file (default <span class="st">&quot;/home/cuc/.docker/key.pem&quot;</span>)</span>
<span id="cb8-35"><a href="#cb8-35"></a>      <span class="ex">--tlsverify</span>          Use TLS and verify the remote</span>
<span id="cb8-36"><a href="#cb8-36"></a>  <span class="ex">-v</span>, --version            Print version information and quit</span>
<span id="cb8-37"><a href="#cb8-37"></a></span>
<span id="cb8-38"><a href="#cb8-38"></a><span class="ex">Management</span> Commands:</span>
<span id="cb8-39"><a href="#cb8-39"></a>  <span class="ex">config</span>      Manage Docker configs</span>
<span id="cb8-40"><a href="#cb8-40"></a>  <span class="ex">container</span>   Manage containers</span>
<span id="cb8-41"><a href="#cb8-41"></a>  <span class="ex">image</span>       Manage images</span>
<span id="cb8-42"><a href="#cb8-42"></a>  <span class="ex">network</span>     Manage networks</span>
<span id="cb8-43"><a href="#cb8-43"></a>  <span class="ex">node</span>        Manage Swarm nodes</span>
<span id="cb8-44"><a href="#cb8-44"></a>  <span class="ex">plugin</span>      Manage plugins</span>
<span id="cb8-45"><a href="#cb8-45"></a>  <span class="ex">secret</span>      Manage Docker secrets</span>
<span id="cb8-46"><a href="#cb8-46"></a>  <span class="ex">service</span>     Manage services</span>
<span id="cb8-47"><a href="#cb8-47"></a>  <span class="ex">stack</span>       Manage Docker stacks</span>
<span id="cb8-48"><a href="#cb8-48"></a>  <span class="ex">swarm</span>       Manage Swarm</span>
<span id="cb8-49"><a href="#cb8-49"></a>  <span class="ex">system</span>      Manage Docker</span>
<span id="cb8-50"><a href="#cb8-50"></a>  <span class="ex">trust</span>       Manage trust on Docker images (experimental)</span>
<span id="cb8-51"><a href="#cb8-51"></a>  <span class="ex">volume</span>      Manage volumes</span>
<span id="cb8-52"><a href="#cb8-52"></a></span>
<span id="cb8-53"><a href="#cb8-53"></a><span class="ex">Commands</span>:</span>
<span id="cb8-54"><a href="#cb8-54"></a>  <span class="ex">attach</span>      Attach local standard input, output, and error streams to a running container</span>
<span id="cb8-55"><a href="#cb8-55"></a>  <span class="ex">build</span>       Build an image from a Dockerfile</span>
<span id="cb8-56"><a href="#cb8-56"></a>  <span class="ex">commit</span>      Create a new image from a container<span class="st">&#39;s changes</span></span>
<span id="cb8-57"><a href="#cb8-57"></a><span class="st">  cp          Copy files/folders between a container and the local filesystem</span></span>
<span id="cb8-58"><a href="#cb8-58"></a><span class="st">  create      Create a new container</span></span>
<span id="cb8-59"><a href="#cb8-59"></a><span class="st">  diff        Inspect changes to files or directories on a container&#39;</span>s filesystem</span>
<span id="cb8-60"><a href="#cb8-60"></a>  <span class="ex">events</span>      Get real time events from the server</span>
<span id="cb8-61"><a href="#cb8-61"></a>  <span class="bu">exec</span>        Run a command in a running container</span>
<span id="cb8-62"><a href="#cb8-62"></a>  <span class="bu">export</span>      <span class="va">Export</span> <span class="va">a</span> <span class="va">container</span><span class="st">&#39;s filesystem as a tar archive</span></span>
<span id="cb8-63"><a href="#cb8-63"></a><span class="st">  history     Show the history of an image</span></span>
<span id="cb8-64"><a href="#cb8-64"></a><span class="st">  images      List images</span></span>
<span id="cb8-65"><a href="#cb8-65"></a><span class="st">  import      Import the contents from a tarball to create a filesystem image</span></span>
<span id="cb8-66"><a href="#cb8-66"></a><span class="st">  info        Display system-wide information</span></span>
<span id="cb8-67"><a href="#cb8-67"></a><span class="st">  inspect     Return low-level information on Docker objects</span></span>
<span id="cb8-68"><a href="#cb8-68"></a><span class="st">  kill        Kill one or more running containers</span></span>
<span id="cb8-69"><a href="#cb8-69"></a><span class="st">  load        Load an image from a tar archive or STDIN</span></span>
<span id="cb8-70"><a href="#cb8-70"></a><span class="st">  login       Log in to a Docker registry</span></span>
<span id="cb8-71"><a href="#cb8-71"></a><span class="st">  logout      Log out from a Docker registry</span></span>
<span id="cb8-72"><a href="#cb8-72"></a><span class="st">  logs        Fetch the logs of a container</span></span>
<span id="cb8-73"><a href="#cb8-73"></a><span class="st">  pause       Pause all processes within one or more containers</span></span>
<span id="cb8-74"><a href="#cb8-74"></a><span class="st">  port        List port mappings or a specific mapping for the container</span></span>
<span id="cb8-75"><a href="#cb8-75"></a><span class="st">  ps          List containers</span></span>
<span id="cb8-76"><a href="#cb8-76"></a><span class="st">  pull        Pull an image or a repository from a registry</span></span>
<span id="cb8-77"><a href="#cb8-77"></a><span class="st">  push        Push an image or a repository to a registry</span></span>
<span id="cb8-78"><a href="#cb8-78"></a><span class="st">  rename      Rename a container</span></span>
<span id="cb8-79"><a href="#cb8-79"></a><span class="st">  restart     Restart one or more containers</span></span>
<span id="cb8-80"><a href="#cb8-80"></a><span class="st">  rm          Remove one or more containers</span></span>
<span id="cb8-81"><a href="#cb8-81"></a><span class="st">  rmi         Remove one or more images</span></span>
<span id="cb8-82"><a href="#cb8-82"></a><span class="st">  run         Run a command in a new container</span></span>
<span id="cb8-83"><a href="#cb8-83"></a><span class="st">  save        Save one or more images to a tar archive (streamed to STDOUT by default)</span></span>
<span id="cb8-84"><a href="#cb8-84"></a><span class="st">  search      Search the Docker Hub for images</span></span>
<span id="cb8-85"><a href="#cb8-85"></a><span class="st">  start       Start one or more stopped containers</span></span>
<span id="cb8-86"><a href="#cb8-86"></a><span class="st">  stats       Display a live stream of container(s) resource usage statistics</span></span>
<span id="cb8-87"><a href="#cb8-87"></a><span class="st">  stop        Stop one or more running containers</span></span>
<span id="cb8-88"><a href="#cb8-88"></a><span class="st">  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE</span></span>
<span id="cb8-89"><a href="#cb8-89"></a><span class="st">  top         Display the running processes of a container</span></span>
<span id="cb8-90"><a href="#cb8-90"></a><span class="st">  unpause     Unpause all processes within one or more containers</span></span>
<span id="cb8-91"><a href="#cb8-91"></a><span class="st">  update      Update configuration of one or more containers</span></span>
<span id="cb8-92"><a href="#cb8-92"></a><span class="st">  version     Show the Docker version information</span></span>
<span id="cb8-93"><a href="#cb8-93"></a><span class="st">  wait        Block until one or more containers stop, then print their exit codes</span></span>
<span id="cb8-94"><a href="#cb8-94"></a></span>
<span id="cb8-95"><a href="#cb8-95"></a><span class="st">Run &#39;</span><span class="va">docker</span> <span class="va">COMMAND</span> --help<span class="st">&#39; for more information on a command.</span></span></code></pre></div>
<hr />
<h2 id="å‘½ä»¤ç®€å•åˆ†ç±»æ•´ç†åŠ©è®°">å‘½ä»¤ç®€å•åˆ†ç±»æ•´ç†åŠ©è®°</h2>
<ul>
<li>å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç† â€” docker [run|start|stop|restart|kill|rm|pause|unpause]</li>
<li>å®¹å™¨æ“ä½œè¿ç»´ â€” docker [ps|inspect|top|attach|events|logs|wait|export|port|exec]</li>
<li>å®¹å™¨rootfså‘½ä»¤ â€” docker [commit|cp|diff]</li>
<li>é•œåƒä»“åº“ â€” docker [login|pull|push|search]</li>
<li>æœ¬åœ°é•œåƒç®¡ç† â€” docker [images|rmi|tag|build|history|save|import]</li>
<li>å…¶ä»–å‘½ä»¤ â€” docker [info|version]</li>
</ul>
<hr />
<h2 id="docker-ecosystem">å…¶ä»–éœ€è¦äº†è§£çš„DockeråŠŸèƒ½ä¸ç‰¹æ€§</h2>
<ul>
<li><a href="https://docs.docker.com/engine/tutorials/networkingcontainers/">Dockerè™šæ‹Ÿç½‘ç»œçš„ç‰¹æ€§ä¸ç®¡ç†</a></li>
<li><a href="https://docs.docker.com/engine/tutorials/dockervolumes/">é•œåƒã€å®¹å™¨ä»¥åŠå®¿ä¸»æœºæ•°æ®ç®¡ç†ï¼ˆå…±äº«ã€éš”ç¦»ç­‰ï¼‰</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-cluster-of-docker-containers-with-docker-swarm-and-digitalocean-on-ubuntu-16-04">Dockeré›†ç¾¤ç®¡ç†</a></li>
<li><a href="https://gigaom.com/report/docker-and-the-current-linux-container-ecosystem/">Dockerç”Ÿæ€</a></li>
</ul>
<h1 id="æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²å·¥å…·">æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²å·¥å…·</h1>
<hr />
<h2 id="jenkins"><a href="https://jenkins.io">jenkins</a></h2>
<blockquote>
<p>Jenkins is a self-contained, open source automation server which can be used to automate all sorts of tasks such as building, testing, and deploying software.</p>
</blockquote>
<p>Jenkins æ˜¯è¢«å¹¿æ³›åº”ç”¨çš„æŒç»­é›†æˆã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æŒç»­éƒ¨ç½²çš„æ¡†æ¶ï¼Œç”šè‡³æœ‰äº›é¡¹ç›®ç»„é¡ºä¾¿å°†å…¶ç”¨æ¥åšæµç¨‹ç®¡ç†çš„å·¥å…·ã€‚</p>
<hr />
<h2 id="travis"><a href="https://travis-ci.org/">travis</a></h2>
<blockquote>
<p>Test and Deploy Your Code with Confidence</p>
</blockquote>
<p><a href="https://docs.travis-ci.com/user/tutorial/">åªæ”¯æŒ GitHub æ‰˜ç®¡ä»£ç </a>çš„æŒç»­é›†æˆæœåŠ¡ï¼ŒåŒæ—¶æ”¯æŒ<a href="https://docs.travis-ci.com/user/deployment/">æŒç»­éƒ¨ç½²åˆ°æŒ‡å®šçš„ä¸€äº›ç¬¬ä¸‰æ–¹äº‘è®¡ç®—å¹³å°</a>ã€‚</p>
<p>å¯¹äº GitHub ä¸Šçš„ç§æœ‰ä»“åº“ä»£ç ï¼Œéœ€è¦ä»˜è´¹è´­ä¹°<a href="https://travis-ci.com/">travis-ci.com</a>çš„æœåŠ¡ã€‚å¯¹äº GitHub ä¸Šçš„å¼€æºé¡¹ç›®ä»£ç ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨ <a href="https://travis-ci.org/">travis-ci.org</a> ï¼Œæœªæ¥å°†é€æ­¥è½¬å‘ç»Ÿä¸€ç”±<a href="https://travis-ci.com/">travis-ci.com</a>ç»§ç»­å‘ GitHub.com ä¸Šçš„å¼€æºé¡¹ç›®ç»§ç»­æä¾›å…è´¹æœåŠ¡ã€‚</p>
<hr />
<p><a href="https://docs.travis-ci.com/user/deployment/"><img src="images/chap0x08/travis-supported-deploy-providers.png" /></a></p>
<hr />
<p>ğŸŒ°</p>
<p><a href="https://github.com/c4pr1c3/TravisBasedOJ">åŸºäº Travis çš„è‡ªåŠ¨æ„å»ºç³»ç»Ÿç¼–å†™çš„ä¸€ä¸ªåœ¨çº¿è‡ªåŠ¨åˆ¤é¢˜ç³»ç»Ÿ</a></p>
<hr />
<h3 id="unittestcomparison">ğŸŒ° å•å…ƒæµ‹è¯•æ–¹æ¡ˆé€‰å‹</h3>
<figure>
<img src="images/chap0x08/test-case-framework-comparison.png" alt="" /><figcaption>2019-01-24 Snapshot</figcaption>
</figure>
<hr />
<table style="width:100%;">
<colgroup>
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;"><a href="https://github.com/rylnd/shpec/">shpec</a></th>
<th style="text-align: center;"><a href="https://github.com/chriscool/sharness">sharness</a></th>
<th style="text-align: center;"><a href="https://github.com/sstephenson/bats">bats</a></th>
<th style="text-align: center;"><a href="https://github.com/bats-core/bats-core">bats-core</a></th>
<th style="text-align: center;"><a href="https://github.com/kward/shunit2">shunit2</a></th>
<th style="text-align: center;"><a href="https://github.com/lehmannro/assert.sh">assert.sh</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">æœ€è¿‘ä¸€æ¬¡æäº¤</td>
<td style="text-align: center;"><img src="https://img.shields.io/github/last-commit/rylnd/shpec.svg?label=%20" alt="last-commit" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/last-commit/chriscool/sharness.svg?label=%20" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/last-commit/sstephenson/bats.svg?label=%20" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/last-commit/bats-core/bats-core.svg?label=%20" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/last-commit/kward/shunit2.svg?label=%20" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/last-commit/lehmannro/assert.sh.svg?label=%20" /></td>
</tr>
<tr class="even">
<td style="text-align: center;">ç‚¹èµæ•°</td>
<td style="text-align: center;"><img src="https://img.shields.io/github/stars/rylnd/shpec.svg" alt="stars of rylnd/shpec" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/stars/chriscool/sharness.svg" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/stars/sstephenson/bats.svg" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/stars/bats-core/bats-core.svg" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/stars/kward/shunit2.svg" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/stars/lehmannro/assert.sh.svg" /></td>
</tr>
<tr class="odd">
<td style="text-align: center;">æœ€è¿‘ä¸€æ¬¡è‡ªåŠ¨æ„å»º</td>
<td style="text-align: center;"><a href="https://travis-ci.org/rylnd/shpec"><img src="https://travis-ci.org/rylnd/shpec.svg?branch=master" alt="Build Status" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/chriscool/sharness"><img src="https://travis-ci.org/chriscool/sharness.svg?branch=master" alt="Build Status" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/sstephenson/bats"><img src="https://travis-ci.org/sstephenson/bats.svg?branch=master" alt="Build Status" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/bats-core/bats-core"><img src="https://travis-ci.org/bats-core/bats-core.svg?branch=master" alt="Build Status" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/kward/shunit2"><img src="https://travis-ci.org/kward/shunit2.svg?branch=master" alt="Build Status" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/lehmannro/assert.sh"><img src="https://travis-ci.org/lehmannro/assert.sh.svg?branch=master" alt="Build Status" /></a></td>
</tr>
<tr class="even">
<td style="text-align: center;">æœ€è¿‘ä¸€å¹´çš„æäº¤æ¬¡æ•°</td>
<td style="text-align: center;"><img src="https://img.shields.io/github/commit-activity/y/rylnd/shpec.svg?label=%20" alt="shpec" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/commit-activity/y/chriscool/sharness.svg?label=%20" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/commit-activity/y/sstephenson/bats.svg?label=%20" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/commit-activity/y/bats-core/bats-core.svg?label=%20" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/commit-activity/y/kward/shunit2.svg?label=%20" /></td>
<td style="text-align: center;"><img src="https://img.shields.io/github/commit-activity/y/lehmannro/assert.sh.svg?label=%20%20" /></td>
</tr>
<tr class="odd">
<td style="text-align: center;">travis CI</td>
<td style="text-align: center;"><a href="https://github.com/rylnd/shpec/blob/master/.travis.yml">.travis.yml</a></td>
<td style="text-align: center;"><a href="https://github.com/chriscool/sharness/blob/master/.travis.yml">.travis.yml</a></td>
<td style="text-align: center;"><a href="https://github.com/sstephenson/bats/blob/master/.travis.yml">.travis.yml</a></td>
<td style="text-align: center;"><a href="https://github.com/bats-core/bats-core/blob/master/.travis.yml">.travis.yml</a></td>
<td style="text-align: center;"><a href="https://github.com/kward/shunit2/blob/master/.travis.yml">.travis.yml</a></td>
<td style="text-align: center;"><a href="https://github.com/lehmannro/assert.sh/blob/master/.travis.yml">.travis.yml</a></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="https://testanything.org/">Test Anything Protocol</a></td>
<td style="text-align: center;">è¡Œä¸ºé©±åŠ¨å¼€å‘ï¼ˆBDDï¼‰æ¨¡å¼</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">åŸºäº <a href="https://en.wikipedia.org/wiki/XUnit">xUnit</a> æ¨¡å¼</td>
<td style="text-align: center;">âœ…</td>
</tr>
<tr class="odd">
<td style="text-align: center;">ç‰¹è‰²</td>
<td style="text-align: center;">æ¶æ„è®¾è®¡ä»¿ç…§ <a href="https://github.com/rspec/rspec">RSpec</a>, <a href="https://github.com/jasmine/jasmine">Jasmine</a>, <a href="https://github.com/mochajs/mocha">mocha</a></td>
<td style="text-align: center;">æå–è‡ª Git çš„è„šæœ¬è‡ªåŠ¨åŒ–æ¡†æ¶</td>
<td style="text-align: center;"><a href="https://github.com/sstephenson/bats/wiki/Projects-Using-Bats">çŸ¥åæˆåŠŸæ¡ˆä¾‹å¤šï¼šå¤§é‡çŸ¥åå¼€æºé¡¹ç›®éƒ½åœ¨ä½¿ç”¨è¯¥é¡¹ç›®</a></td>
<td style="text-align: center;">åŸºäº <a href="https://github.com/sstephenson/bats/commit/03608115df2071fff4eaaff1605768c275e5f81f">bats æœ€åä¸€æ¬¡æ›´æ–° 0360811</a> çš„ fork ç‰ˆ</td>
<td style="text-align: center;">æ”¯æŒçš„ shell ç±»å‹å¤š</td>
<td style="text-align: center;">ä»£ç é‡å°ï¼Œè½»é‡çº§æµ‹è¯•æ¡†æ¶</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="gitlab-ci"><a href="https://docs.gitlab.com/ce/ci/README.html">Gitlab CI</a></h2>
<p><img src="images/chap0x08/gitlab_cicd_pipeline_infograph.png" /></p>
<p>GitLab å†…ç½®çš„æŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²åŠŸèƒ½ï¼Œå¼€æºç¤¾åŒºç‰ˆä¹Ÿå¯ä»¥å…è´¹ä½¿ç”¨è¯¥åŠŸèƒ½ã€‚</p>
<hr />
<h3 id="jenkins-travis-gitlab-ci">jenkins / travis / Gitlab CI</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">jenkins</th>
<th style="text-align: center;">travis</th>
<th style="text-align: center;">Gitlab CI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">CI</td>
<td style="text-align: center;">æ”¯æŒè‡ªå®šä¹‰æ¥æºçš„ä»£ç æ‰˜ç®¡ä»“åº“</td>
<td style="text-align: center;">ä»…é™ GitHub.com ä¸Šæ‰˜ç®¡çš„ä»£ç </td>
<td style="text-align: center;">ä»…é™ GitLab.com å’Œä½¿ç”¨ GitLab è‡ªå»ºä»“åº“æ‰˜ç®¡çš„ä»£ç </td>
</tr>
<tr class="even">
<td style="text-align: center;">CD</td>
<td style="text-align: center;">æ”¯æŒè‡ªå®šä¹‰éƒ¨ç½²ç›®æ ‡</td>
<td style="text-align: center;"><a href="https://docs.travis-ci.com/user/deployment/">å®˜æ–¹æŒ‡å®šç¬¬ä¸‰æ–¹å¹³å°è‹¥å¹²</a></td>
<td style="text-align: center;">æ”¯æŒè‡ªå®šä¹‰éƒ¨ç½²ç›®æ ‡</td>
</tr>
<tr class="odd">
<td style="text-align: center;">docker</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âœ…</td>
</tr>
<tr class="even">
<td style="text-align: center;">è‡ªå»ºæœåŠ¡</td>
<td style="text-align: center;">âœ…</td>
<td style="text-align: center;">âŒ</td>
<td style="text-align: center;">âœ…</td>
</tr>
</tbody>
</table>
<h1 id="openstack"><a href="https://www.openstack.org/">openstack</a></h1>
<hr />
<blockquote>
<p>OpenStack is a cloud operating system that controls large pools of compute, storage, and networking resources throughout a datacenter, all managed through a dashboard that gives administrators control while empowering their users to provision resources through a web interface.</p>
</blockquote>
<h1 id="openvswitch"><a href="http://openvswitch.org">openvswitch</a></h1>
<hr />
<blockquote>
<p>Open vSwitch is a production quality, multilayer virtual switch licensed under the open source Apache 2.0 license. It is designed to enable massive network automation through programmatic extension, while still supporting standard management interfaces and protocols (e.g.Â NetFlow, sFlow, IPFIX, RSPAN, CLI, LACP, 802.1ag). In addition, it is designed to support distribution across multiple physical servers similar to VMwareâ€™s vNetwork distributed vswitch or Ciscoâ€™s Nexus 1000V.</p>
</blockquote>
<h1 id="tcpreplay-tcpcopy"><a href="http://tcpreplay.synfin.net">tcpreplay</a> + tcpcopy</h1>
<hr />
<blockquote>
<p>Tcpreplay is a suite of GPLv3 licensed tools written by Aaron Turner for UNIX (and Win32 under Cygwin) operating systems which gives you the ability to use previously captured traffic in libpcap format to test a variety of network devices. It allows you to classify traffic as client or server, rewrite Layer 2, 3 and 4 headers and finally replay the traffic back onto the network and through other devices such as switches, routers, firewalls, NIDS and IPSâ€™s. Tcpreplay supports both single and dual NIC modes for testing both sniffing and inline devices.</p>
</blockquote>
<p>ä¸€è¨€ä»¥è”½ä¹‹ï¼šæ»¡è¶³å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒæ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒçœŸå®æµé‡çš„éœ€æ±‚ã€‚</p>
<hr />
<h2 id="ä¸ºä»€ä¹ˆéœ€è¦æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒçœŸå®æµé‡">ä¸ºä»€ä¹ˆéœ€è¦æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒçœŸå®æµé‡</h2>
<ul>
<li>çº¿ä¸‹çš„ä¼ ç»Ÿå‹åŠ›æµ‹è¯•ï¼Œéš¾ä»¥æ¨¡æ‹ŸçœŸå®æµé‡ï¼Œå°¤å…¶éš¾ä»¥æ¨¡æ‹Ÿæ­£å¸¸æµé‡æ··æ‚ç€å„è‰²å¼‚å¸¸æµé‡ã€‚æ‰€ä»¥ï¼Œçº¿ä¸‹å‹å¾—å¥½å¥½çš„ç³»ç»Ÿï¼Œä¸Šçº¿åå¯èƒ½æŸå¤©çªç„¶é›ªå´©ï¼Œè¯´å¥½èƒ½æ”¯æ’‘ 5 å€æµé‡çš„ç³»ç»Ÿé‡æ„ï¼Œä¹Ÿè®¸æµé‡ä¸€ç¿»å€å°±å½»åº•æŒ‚äº†ã€‚</li>
<li>ç³»ç»Ÿé‡æ„æˆ–é‡è¦å˜æ›´ä¸Šçº¿å‰ï¼Œå¯ä»¥æ‹·è´çº¿ä¸ŠçœŸå®æµé‡ï¼Œå®æ—¶æ¨¡æ‹Ÿçº¿ä¸Šæµé‡ï¼Œç”šè‡³å¯ä»¥æ”¾å¤§çœŸå®æµé‡ï¼Œè¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œä»¥è¯„ä¼°ç³»ç»Ÿæ‰¿è½½èƒ½åŠ›ã€‚</li>
<li>åè¿‡æ¥ä¹Ÿå¯ä»¥è¿™æ ·ï¼Œå¦‚æœçº¿ä¸Šè·‘ç€è·‘ç€å‘ç°æœ‰æ€§èƒ½ç“¶é¢ˆï¼Œä½†çº¿ä¸‹ç¯å¢ƒéš¾ä»¥å¤ç°ï¼Œå¯ä»¥æŠŠçœŸå®æµé‡æ‹·è´åˆ°çº¿ä¸‹é‡æ”¾ï¼Œç›´åˆ°æ‰¾åˆ°é—®é¢˜ã€‚</li>
</ul>
<hr />
<h2 id="tcpreplay-vs.-tcpcopy"><a href="http://elastos.org/redmine/attachments/download/425/TCPCopy_Manual(Chinese).pdf">tcpreplay vs.Â tcpcopy</a></h2>
<p>tcpdump+Tcpreplay æˆ–è€… wireshark+Tcpreplay å¯ä»¥ç”¨æ¥å›æ”¾åœ¨çº¿æµé‡ï¼Œè¿™ç§æ–¹æ¡ˆå¯ä»¥è§£å†³ TCP å±‚ä»¥ä¸‹çš„é—®é¢˜ï¼Œå¦‚é˜²ç«å¢™é—®é¢˜ï¼Œç„¶è€Œï¼Œæ­¤æ–¹æ¡ˆä»æœ‰å¦‚ä¸‹ç¼ºé™·ï¼š</p>
<hr />
<ol type="1">
<li>tcpdump æŠ“åœ¨çº¿æ•°æ®åŒ…ï¼Œå¿…ç„¶æˆ–å¤šæˆ–å°‘å½±å“åœ¨çº¿ IOï¼Œå‹åŠ›å¤§çš„æ—¶å€™å°¤å…¶æ˜æ˜¾</li>
<li>tcpdump è‡ªèº«ä¼šä¸¢åŒ…ï¼Œç‰¹åˆ«æ˜¯å‹åŠ›å¤§çš„æ—¶å€™ï¼Œä¸¢åŒ…ä¼šå¾ˆä¸¥é‡ï¼Œè¿œè¿œè¶…è¿‡ TCPCopy</li>
<li>tcpdump æŠ“çš„åŒ…éœ€è¦ä¿å­˜ä¸‹æ¥ï¼Œå¿…ç„¶ä½¿å…¶æŠ“çš„åŒ…æœ‰é™ï¼Œä¸€èˆ¬å¾ˆå°‘æŠ“å‡ å¤©çš„æ•°æ®åŒ…</li>
<li>åˆ©ç”¨ Tcpreplay é‡æ”¾ï¼Œä¸€èˆ¬éœ€ä¿®æ”¹æ•°æ®åŒ…çš„æº IP åœ°å€ï¼Œè¿™æ ·å¿…ç„¶è·Ÿåœ¨çº¿ç¯å¢ƒä¸ä¸€æ ·ï¼Œå¯¹å†…æ ¸åè®®æ ˆçš„å†²å‡»å°±å¾ˆä¸ä¸€æ ·</li>
<li>ç”±äºæ˜¯ç¦»çº¿å›æ”¾ï¼Œå¯¼è‡´ Tcpreplay å›æ”¾çš„æ—¶å€™ç½‘ç»œç¯å¢ƒå¯èƒ½å·²ç»ä¸æŠ“åŒ…çš„æ—¶å€™ä¸åŒäº†ï¼ŒTcpreplay å¾ˆéš¾æ ¹æ®ä¸åŒçš„ç¯å¢ƒåšç›¸åº”çš„è°ƒæ•´ï¼Œä»è€Œå¯¼è‡´å›æ”¾çš„æ•ˆæœä¸åœ¨çº¿ä¼šæœ‰ä¸€å®šçš„</li>
<li>Tcpreplay ç›¸å¯¹ TCPCopyï¼Œä½¿ç”¨æ›´ä¸ºå¤æ‚</li>
</ol>
<hr />
<p><a href="https://github.com/wangbin579/tcpcopy">TCPCopy</a>ä¸»è¦ç”¨æ¥è§£å†³ TCP å±‚åŠå…¶ä»¥ä¸Šï¼ˆå¦‚ http åè®®ï¼‰çš„æµé‡å¤åˆ¶é—®é¢˜ï¼Œç”¨äºæœåŠ¡å™¨ç«¯çš„æµé‡å›æ”¾é¢†åŸŸã€‚æ€»ä½“æ¥è¯´ï¼ŒTCPCopy æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p>
<hr />
<ol type="1">
<li>TCPCopy èƒ½å¤Ÿå¯¹æœåŠ¡å™¨ç«¯è¿›è¡Œå›æ”¾ï¼Œä¸ä»…å¯ä»¥ç¦»çº¿å›æ”¾ï¼Œè¿˜å¯ä»¥å®æ—¶å›æ”¾</li>
<li>TCPCopy å®æ—¶å¤åˆ¶åœ¨çº¿è¯·æ±‚åŒ…ç»™æµ‹è¯•æœåŠ¡å™¨ï¼Œå¹¶ä¸éœ€è¦å¤§é‡ IO æ“ä½œï¼Œå› æ­¤ä¸å½±å“åœ¨çº¿ IO</li>
<li>å®æ—¶å›æ”¾æ‰€åœ¨çš„ç½‘ç»œç¯å¢ƒä¸å½“æ—¶çš„åœ¨çº¿ç¯å¢ƒå‡ ä¹æ˜¯ä¸€æ ·çš„</li>
<li>TCPCopy ä¸ä¼šå»ä¿®æ”¹æ•°æ®åŒ…çš„æº IP åœ°å€</li>
<li>TCPCopy å®æ—¶å¤åˆ¶è½¬å‘è¿‡å»çš„æ•°æ®åŒ…ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°ç»§æ‰¿åœ¨çº¿æ•°æ®åŒ…çš„ç½‘ç»œå»¶è¿Ÿç‰¹å¾</li>
<li>TCPCopy ä½¿ç”¨éå¸¸ç®€å•</li>
</ol>
<h1 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h1>
<hr />
<ul>
<li><a href="https://en.wikipedia.org/wiki/DevOps">DevOps from WikiPedia</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/22638204">ç»™ DevOps åˆå­¦è€…çš„å…¥é—¨æŒ‡å—</a></li>
<li><a href="http://blog.dataman-inc.com/117-shurenyun-huodong/">è¿ç»´è‡ªåŠ¨åŒ–é—­ç¯ï¼Œä»è…¾è®¯èµ°å‡ºæ¥çš„å®è·µ</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzAxMzMxNDIyOA==&amp;mid=206460178&amp;idx=1&amp;sn=54a3382dc4def83d808bc172c012393f&amp;scene=21">å½“æˆ‘ä»¬åœ¨è°ˆè®ºbugæ—¶æˆ‘ä»¬è°ˆè®ºçš„å…¶å®æ˜¯ by è¥¿ä¹” ç¥ç§˜çš„ç¨‹åºå‘˜ä»¬</a></li>
<li><a href="https://www.zhihu.com/question/46791295">dockerä¸ºä»€ä¹ˆé€‚åˆdevopsï¼Ÿ</a></li>
<li><a href="http://www.mindtheproduct.com/2016/02/what-the-hell-are-ci-cd-and-devops-a-cheatsheet-for-the-rest-of-us/">The Product Managersâ€™ Guide to Continuous Delivery and DevOps</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-16-04">How To Install and Use Docker on Ubuntu 16.04</a></li>
</ul>
<h1 id="ç•ªå¤–">ç•ªå¤–</h1>
<hr />
<ul>
<li>æŒç»­è¿›åŒ–çš„è½¯ä»¶
<ul>
<li><strong>å¯é‡ç”¨</strong>
<ul>
<li>å‡½æ•°</li>
<li>å¯¹è±¡ä¸ç±»</li>
<li>libå°è£…</li>
</ul></li>
<li><strong>å¯åˆ†äº«</strong>
<ul>
<li>å¼€æºè½¯ä»¶</li>
</ul></li>
<li><strong>å¯åä½œ</strong>
<ul>
<li>Github</li>
<li>Ansible Galaxy</li>
<li>Docker Hub</li>
</ul></li>
</ul></li>
</ul>
<hr />
<p>Code Defined Software!</p>
<p>Software Defined Everything!</p>
</body>
</html>
