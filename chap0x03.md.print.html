<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="é»„ç®" />
  <title>Linuxç³»ç»Ÿä¸ç½‘ç»œç®¡ç†</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Linuxç³»ç»Ÿä¸ç½‘ç»œç®¡ç†</h1>
<p class="author">é»„ç®</p>
</header>
<h1 id="ç¬¬ä¸‰ç« linuxæœåŠ¡å™¨ç³»ç»Ÿç®¡ç†åŸºç¡€">ç¬¬ä¸‰ç« ï¼šLinuxæœåŠ¡å™¨ç³»ç»Ÿç®¡ç†åŸºç¡€</h1>
<hr />
<h2 id="system-administrator-is-root">System Administrator is root</h2>
<h1 id="linuxæœåŠ¡å™¨ç®¡ç†å‘˜çš„å…¸å‹å·¥ä½œåœºæ™¯å’Œéœ€æ±‚">LinuxæœåŠ¡å™¨ç®¡ç†å‘˜çš„å…¸å‹å·¥ä½œåœºæ™¯å’Œéœ€æ±‚</h1>
<hr />
<ul>
<li>æœ¬åœ°å·¥ä½œç”¨ç”µè„‘æ˜¯Windowsæˆ–Macï¼ŒLinuxæ˜¯è¿œç¨‹æœåŠ¡å™¨ç³»ç»Ÿ</li>
<li>æœåŠ¡å™¨7x24å°æ—¶å¼€æœºï¼Œé™¤å»ç³»ç»Ÿå†…æ ¸æ›´æ–°ç­‰éœ€è¦é‡å¯æœåŠ¡å™¨çš„æƒ…å†µ</li>
<li>è¿œç¨‹SSHç™»å½•åˆ°æœåŠ¡å™¨ä¸Šæ˜¯å·¥ä½œå¸¸æ€</li>
<li>ç§»åŠ¨åŠå…¬æ—¶å¯ä»¥ä¿æŒè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æ“ä½œè¢«â€œè®°ä½â€å’Œâ€œæŒ‰éœ€å¤åŸâ€</li>
<li>è®©è¿›ç¨‹æ›´ä¼˜é›…çš„è¿è¡Œåœ¨åå°ï¼Œé€€å‡ºSSHä¼šè¯ä¸å½±å“åˆšæ‰å¯åŠ¨çš„è¿›ç¨‹</li>
</ul>
<h1 id="è¿œç¨‹ç®¡ç†å·¥å…·ç®±">è¿œç¨‹ç®¡ç†å·¥å…·ç®±</h1>
<hr />
<ul>
<li>å·¥ä½œç”µè„‘
<ul>
<li>SSHå®¢æˆ·ç«¯è½¯ä»¶</li>
</ul></li>
<li>æœåŠ¡å™¨ä¸Š
<ul>
<li>tmuxï¼ˆ<a href="https://www.gnu.org/software/screen/">screen</a>çš„å¢å¼ºç‰ˆï¼‰</li>
</ul></li>
</ul>
<hr />
<h2 id="tmux">tmux</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># å¼€å¯ä¸€ä¸ªtmuxä¼šè¯</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="ex">tmux</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># CTRL-B d è„±ç¦»(detach)å½“å‰tmuxä¼šè¯</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># å†å¼€å¯ä¸€ä¸ªtmuxä¼šè¯</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="ex">tmux</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># CTRL-B d å†è„±ç¦»(detach)å½“å‰tmuxä¼šè¯</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># æŸ¥çœ‹å½“å‰å¯ç”¨çš„tmuxä¼šè¯åˆ—è¡¨</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="ex">tmux</span> ls</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co"># è¿æ¥åˆ°ä¼šè¯ç¼–å·0çš„ä¼šè¯</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="ex">tmux</span> attach -t 0</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co"># é€€å‡ºå¹¶å…³é—­å½“å‰ä¼šè¯</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="bu">exit</span></span></code></pre></div>
<hr />
<p>ç”¨tmuxé‡åšä¸Šä¸€ç« çš„pingå‰åå°æ‰§è¡Œæ–¹å¼å®éªŒ</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># æœ¬å®éªŒå»ºè®®é€šè¿‡SSHè¿œç¨‹ç™»å½•åˆ°è™šæ‹Ÿæœºä¸Šæ‰§è¡Œ</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">ping</span> www.baidu.com <span class="op">2&gt;&amp;1</span> <span class="op">1&gt;</span>/dev/null <span class="kw">&amp;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">ping</span> sec.cuc.edu.cn <span class="op">2&gt;&amp;1</span> <span class="op">1&gt;</span>/dev/null <span class="kw">&amp;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># æ³¨æ„æŸ¥çœ‹è¾“å‡ºç»“æœï¼Œè§‚å¯Ÿpingè¿›ç¨‹çš„çˆ¶è¿›ç¨‹æ˜¯è°</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="fu">pstree</span> -A</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co"># æ­¤æ—¶é€€å‡ºSSHç™»å½•</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="bu">exit</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co"># å†é‡æ–°SSHç™»å½•åˆ°è™šæ‹Ÿæœºä¸Šæ‰§è¡Œ</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co"># æ³¨æ„æŸ¥çœ‹è¾“å‡ºç»“æœï¼Œè§‚å¯Ÿpingè¿›ç¨‹çš„çˆ¶è¿›ç¨‹æ˜¯è°ï¼Œå’Œé€€å‡ºSSHç™»å½•ä¹‹å‰ç›¸æ¯”æ˜¯å¦æœ‰å˜åŒ–ï¼Ÿ</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="fu">pstree</span> -A</span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co"># å¼€å¯ä¸€ä¸ªtmuxä¼šè¯</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="ex">tmux</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co"># é‡å¤ä¸Šè¿°å®éªŒï¼Œç”¨åå°è¿›ç¨‹æ–¹å¼å¼€å¯æ–°çš„pingè¿›ç¨‹</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co"># å†æ¬¡SSHç™»å½•åˆ°è™šæ‹Ÿæœºä¸Šæ‰§è¡Œ</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co"># æ³¨æ„æŸ¥çœ‹è¾“å‡ºç»“æœï¼Œè§‚å¯Ÿpingè¿›ç¨‹çš„çˆ¶è¿›ç¨‹æ˜¯è°ï¼Œå’Œé€€å‡ºSSHç™»å½•ä¹‹å‰ç›¸æ¯”æ˜¯å¦æœ‰å˜åŒ–ï¼Ÿ</span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="fu">pstree</span> -A</span></code></pre></div>
<h1 id="ç”¨æˆ·ç»„ä¸æƒé™ç®¡ç†">ç”¨æˆ·/ç»„ä¸æƒé™ç®¡ç†</h1>
<hr />
<ul>
<li>suä¸sudo
<ul>
<li>visudo</li>
</ul></li>
<li>passwd</li>
<li>adduser/useradd</li>
<li>groupadd/addgroup</li>
<li>usermod</li>
<li>getfacl/setfacl</li>
</ul>
<hr />
<h2 id="ç”¨æˆ·æ ‡è¯†uid">ç”¨æˆ·æ ‡è¯†ï¼ˆuidï¼‰</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">id</span> --help</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">id</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="fu">id</span> -g</span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="fu">id</span> -u</span></code></pre></div>
<ul>
<li>ä¸Šè¿°å2ä¸ªå‘½ä»¤çš„å‚æ•°ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯<strong>effective group ID</strong>ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯<strong>effective user ID</strong>ï¼Ÿ</li>
</ul>
<hr />
<h2 id="æŸ¥çœ‹å’Œç†è§£æ–‡ä»¶å’Œç›®å½•çš„å±ä¸»ä¸æƒé™">æŸ¥çœ‹å’Œç†è§£æ–‡ä»¶å’Œç›®å½•çš„å±ä¸»ä¸æƒé™</h2>
<p>ä»ğŸŒ°å¼€å§‹</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1"></a>$ <span class="fu">ls</span> -ld /tmp</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="ex">drwxrwxrwt</span> 8 root root 4096 Jan 20 15:26 /tmp</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a>$ <span class="fu">ls</span> -l /usr/bin/passwd</span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="ex">-rwsr-xr-x</span> 1 root root 54256 Mar 29  2016 /usr/bin/passwd</span>
<span id="cb4-6"><a href="#cb4-6"></a></span>
<span id="cb4-7"><a href="#cb4-7"></a>$ <span class="fu">ls</span> -l /etc/shadow</span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="ex">-rw-r-----</span> 1 root shadow 941 Jan 16 12:37 /etc/shadow</span></code></pre></div>
<hr />
<p>é—®é¢˜æ¥äº†ï¼š</p>
<ul>
<li>rwxæˆ‘ä»¬çŸ¥é“å¯¹åº”â€œè¯»â€ã€â€œå†™â€ã€â€œæ‰§è¡Œâ€æƒé™ä½æ ‡è¯†ï¼Œè¿™é‡Œå‡ºç°çš„<strong>d</strong>ã€<strong>t</strong>ã€<strong>s</strong>æ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿ</li>
<li>æ™®é€šç”¨æˆ·ä¸ºä»€ä¹ˆå¯ä»¥ä½¿ç”¨<strong>/usr/bin/passwd</strong>å»æ›´æ”¹è‡ªå·±çš„å¯†ç ï¼ˆä¿®æ”¹<strong>/etc/shadow</strong>æ–‡ä»¶ï¼‰ï¼Ÿ</li>
</ul>
<hr />
<p>æ–‡ä»¶ç±»å‹</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">man</span> ls</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co"># åœ¨lsçš„æ‰‹å†Œé¡µå†…æœç´¢file mode</span></span></code></pre></div>
<ul>
<li>b â€ƒâ€ƒå—ç‰¹æ®Šæ–‡ä»¶ï¼ˆBlock special fileï¼‰</li>
<li>c â€ƒâ€ƒå­—ç¬¦ç‰¹æ®Šæ–‡ä»¶ï¼ˆCharacter special fileï¼‰</li>
<li>d â€ƒâ€ƒç›®å½•ï¼ˆDirectoryï¼‰</li>
<li>l â€ƒâ€ƒç¬¦å·é“¾æ¥ï¼ˆSymbolic linkï¼‰</li>
<li>s â€ƒâ€ƒå¥—æ¥å­—é“¾æ¥ï¼ˆSocket linkï¼‰</li>
<li>p â€ƒâ€ƒå‘½åç®¡é“ï¼ˆFIFOï¼‰</li>
<li>- â€ƒâ€ƒæ™®é€šæ–‡ä»¶ï¼ˆRegular fileï¼‰</li>
</ul>
<hr />
<p>Saved UID (SUID)</p>
<ul>
<li>å¯¹åº”å±ä¸»ç”¨æˆ·åˆ—æƒé™ä½ä¸­çš„<strong>s</strong>æ ‡è®°ï¼Œå–ä»£åŸæœ‰æ˜¾ç¤º<strong>x</strong>æ ‡è®°çš„ä½ç½®</li>
<li>å½“ä¸”ä»…å½“ä¸€ä¸ªæ–‡ä»¶æ˜¯äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè„šæœ¬æ–‡ä»¶å³ä½¿è®¾ç½®äº†â€œå¯æ‰§è¡Œâ€ä¹Ÿä¸è¡Œï¼‰æ—¶å¯ä»¥è¢«è®¾ç½®SUID</li>
<li>ä¸€ä¸ªè¢«è®¾ç½®äº†SUIDçš„ç¨‹åºï¼Œå…¶ä»–ç”¨æˆ·æ‰§è¡Œè¯¥ç¨‹åºæ—¶å°±ä¼šâ€œæš‚æ—¶â€å¾—åˆ°æ–‡ä»¶æ‹¥æœ‰è€…ï¼ˆé€šå¸¸æ˜¯rootï¼‰çš„æƒé™</li>
</ul>
<hr />
<p>Saved GID (SGID)</p>
<ul>
<li>å¯¹åº”å±ä¸»ç”¨æˆ·ç»„åˆ—æƒé™ä½ä¸­çš„<strong>s</strong>æ ‡è®°ï¼Œå–ä»£åŸæœ‰æ˜¾ç¤º<strong>x</strong>æ ‡è®°çš„ä½ç½®</li>
<li>å¦‚æœSGIDè®¾ç½®åœ¨äºŒè¿›åˆ¶<strong>æ–‡ä»¶</strong>ä¸Šï¼Œåˆ™ä¸è®ºç”¨æˆ·æ˜¯è°ï¼Œåœ¨æ‰§è¡Œè¯¥ç¨‹åºçš„æ—¶å€™ï¼Œå®ƒçš„æœ‰æ•ˆç”¨æˆ·ç»„ï¼ˆeffective groupï¼‰å°†ä¼šå˜æˆè¯¥ç¨‹åºçš„ç”¨æˆ·ç»„æ‰€æœ‰è€…ï¼ˆgroup idï¼‰</li>
<li>å¦‚æœSGIDæ˜¯è®¾ç½®åœ¨A<strong>ç›®å½•</strong>ä¸Šï¼Œåˆ™åœ¨è¯¥A<strong>ç›®å½•</strong>å†…æ‰€å»ºç«‹çš„æ–‡ä»¶æˆ–ç›®å½•çš„ç”¨æˆ·ç»„ï¼Œå°†å¼ºåˆ¶è¢«è®¾ç½®ä¸ºæ­¤Aç›®å½•çš„ç”¨æˆ·ç»„</li>
</ul>
<hr />
<p>Sticky Bit</p>
<ul>
<li>å¯¹åº”<strong>t</strong>æ ‡è®°ï¼Œå–ä»£åŸæœ‰æ˜¾ç¤º<strong>x</strong>æ ‡è®°çš„ä½ç½®</li>
<li>åªèƒ½è®¾ç½®åœ¨ç›®å½•ä¸Šï¼Œå¯¹æ–‡ä»¶æ²¡æœ‰æ•ˆæœ</li>
<li>åœ¨è¢«è®¾ç½®äº†<strong>t</strong>æ ‡è®°çš„ç›®å½•ä¸‹ï¼Œç”¨æˆ·è‹¥åœ¨è¯¥ç›®å½•ä¸‹å…·æœ‰wåŠxæƒé™ï¼Œåˆ™å½“ç”¨æˆ·åœ¨è¯¥ç›®å½•ä¸‹å»ºç«‹æ–‡ä»¶æˆ–ç›®å½•æ—¶ï¼Œåªæœ‰æ–‡ä»¶å±ä¸»ä¸rootæ‰æœ‰æƒé™åˆ é™¤</li>
</ul>
<hr />
<h2 id="æ”¹å˜æ–‡ä»¶å’Œç›®å½•çš„å±ä¸»ä¸æƒé™">æ”¹å˜æ–‡ä»¶å’Œç›®å½•çš„å±ä¸»ä¸æƒé™</h2>
<ul>
<li>chown</li>
<li>chgrp</li>
<li>chmod</li>
<li>umask</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># è®¾ç½®SUID</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">chmod</span> 4755 filename</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co"># è®¾ç½®SGID</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="fu">chmod</span> 2755 dirname</span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co"># åŒæ—¶è®¾ç½®SUIDå’ŒSGIDï¼ˆç½•è§ï¼‰</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="fu">chmod</span> 6755 filename</span>
<span id="cb6-9"><a href="#cb6-9"></a></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co"># è®¾ç½®Sticky Bit</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="fu">chmod</span> 1755 dirname</span></code></pre></div>
<h1 id="sudo-çš„ä¸€äº›å‘">sudo çš„ä¸€äº›å‘</h1>
<hr />
<h2 id="shell-å†…éƒ¨å‘½ä»¤æ— æ³•-sudo">shell å†…éƒ¨å‘½ä»¤æ— æ³• sudo</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="va">cmds=(</span>echo cd history getopts kill pwd<span class="va">)</span>; <span class="kw">for</span> <span class="ex">cmd</span> in <span class="st">&quot;</span><span class="va">${cmds[@]}</span><span class="st">&quot;</span><span class="kw">;do</span> <span class="bu">type</span> -a <span class="st">&quot;</span><span class="va">$cmd</span><span class="st">&quot;</span><span class="kw">;done</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co"># echo is a shell builtin</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co"># cd is a shell builtin</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co"># history is a shell builtin</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co"># getopts is a shell builtin</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="co"># kill is a shell builtin</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="co"># kill is /bin/kill</span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co"># pwd is a shell builtin</span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co"># pwd is /bin/pwd</span></span></code></pre></div>
<hr />
<h2 id="ä»¥ä¸‹åœºæ™¯ä¸è¦-sudo">ä»¥ä¸‹åœºæ™¯ä¸è¦ sudo</h2>
<ul>
<li>ç¼–è¾‘ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„æ–‡ä»¶</li>
<li>æºä»£ç ç¼–è¯‘</li>
<li>é’ˆå¯¹ Mac ç”¨æˆ·
<ul>
<li><del>
sudo brew install
</del></li>
<li><del>
sudo pip install
</del></li>
</ul></li>
</ul>
<h1 id="æ–‡ä»¶ç³»ç»Ÿä¸å­˜å‚¨ç®¡ç†">æ–‡ä»¶ç³»ç»Ÿä¸å­˜å‚¨ç®¡ç†</h1>
<hr />
<ul>
<li>æ–‡ä»¶ç³»ç»Ÿæ ¼å¼
<ul>
<li>ext3 / ext4 / swap</li>
<li>mkfs</li>
</ul></li>
<li>æ–‡ä»¶åˆ†åŒº
<ul>
<li>åˆ†åŒºåŸåˆ™ä¸ç­–ç•¥</li>
<li>fdisk</li>
<li>å¤§äº2TBåˆ†åŒºæ”¯æŒä½¿ç”¨ <a href="https://www.cyberciti.biz/tips/fdisk-unable-to-create-partition-greater-2tb.html">parted</a></li>
</ul></li>
<li>æ–‡ä»¶ç³»ç»ŸæŒ‚è½½
<ul>
<li>Uç›˜ / NFS / iso / å…‰ç›˜</li>
<li>/etc/fstab</li>
</ul></li>
</ul>
<hr />
<h2 id="é€»è¾‘å·ç®¡ç†---lvm-logical-volume-management"><a href="https://wiki.archlinux.org/index.php/LVM_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">é€»è¾‘å·ç®¡ç†</a> - <a href="https://wiki.ubuntu.com/Lvm">LVM, Logical Volume Management</a></h2>
<ul>
<li>LVM æ˜¯ä¸€ç§å¯ç”¨åœ¨Linuxå†…æ ¸çš„é€»è¾‘åˆ†å·ç®¡ç†å™¨ï¼›å¯ç”¨äºç®¡ç†ç£ç›˜é©±åŠ¨å™¨æˆ–å…¶ä»–ç±»ä¼¼çš„å¤§å®¹é‡å­˜å‚¨è®¾å¤‡</li>
</ul>
<p>LVMåˆ©ç”¨Linuxå†…æ ¸çš„device-mapperæ¥å®ç°å­˜å‚¨ç³»ç»Ÿçš„è™šæ‹ŸåŒ–ï¼ˆç³»ç»Ÿåˆ†åŒºç‹¬ç«‹äºåº•å±‚ç¡¬ä»¶ï¼‰ã€‚ é€šè¿‡LVMï¼Œä½ å¯ä»¥å®ç°å­˜å‚¨ç©ºé—´çš„æŠ½è±¡åŒ–å¹¶åœ¨ä¸Šé¢å»ºç«‹è™šæ‹Ÿåˆ†åŒºï¼ˆvirtual partitionsï¼‰ï¼Œå¯ä»¥æ›´ç®€ä¾¿åœ°æ‰©å¤§å’Œç¼©å°åˆ†åŒºï¼Œå¯ä»¥å¢åˆ åˆ†åŒºæ—¶æ— éœ€æ‹…å¿ƒæŸä¸ªç¡¬ç›˜ä¸Šæ²¡æœ‰è¶³å¤Ÿçš„è¿ç»­ç©ºé—´ï¼ŒLVMæ˜¯ç”¨æ¥æ–¹ä¾¿ç®¡ç†çš„ï¼Œ<strong>ä¸ä¼šæä¾›é¢å¤–çš„å®‰å…¨ä¿è¯</strong>ã€‚</p>
<blockquote>
<p><a href="https://www.ibm.com/developerworks/cn/linux/l-cn-pclvm-rstr/">é…åˆå­˜å‚¨ç¡¬ä»¶çš„RaidæŠ€æœ¯ï¼Œæä¾›é«˜å¯é æ€§</a></p>
</blockquote>
<hr />
<p>LVMçš„åŸºæœ¬ç»„æˆå—ï¼ˆbuilding blocksï¼‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç‰©ç†å·(PV, Physical Volume )ï¼šå¯ä»¥åœ¨ä¸Šé¢å»ºç«‹å·ç»„çš„åª’ä»‹ï¼Œå¯ä»¥æ˜¯ç¡¬ç›˜åˆ†åŒºï¼Œä¹Ÿå¯ä»¥æ˜¯ç¡¬ç›˜æœ¬èº«æˆ–è€…å›ç¯æ–‡ä»¶ï¼ˆloopback fileï¼‰ã€‚ç‰©ç†å·åŒ…æ‹¬ä¸€ä¸ªç‰¹æ®Šçš„headerï¼Œå…¶ä½™éƒ¨åˆ†è¢«åˆ‡å‰²ä¸ºä¸€å—å—ç‰©ç†åŒºåŸŸï¼ˆphysical extentsï¼‰ã€‚åŸºäºç‰©ç†å·å¯ä»¥åˆ›å»ºâ€œé€»è¾‘ä¸Šæˆ–è™šæ‹Ÿçš„â€ç¡¬ç›˜ã€‚</li>
<li>å·ç»„(VG, Volume Group)ï¼šå°†ä¸€ç»„ç‰©ç†å·æ”¶é›†ä¸ºä¸€ä¸ªç®¡ç†å•å…ƒã€‚ä¸€ä¸ªå·ç»„å°±ç›¸å½“äºä¸€ä¸ªâ€œç‰©ç†â€ç¡¬ç›˜ã€‚</li>
<li>é€»è¾‘å·(LV, Logical Volume)ï¼šè™šæ‹Ÿåˆ†åŒºï¼Œç”±ç‰©ç†åŒºåŸŸï¼ˆphysical extentsï¼‰ç»„æˆã€‚ç›¸å½“äºåŸºäºâ€œç‰©ç†â€ç¡¬ç›˜ï¼ˆå·ç»„ï¼‰ä¹‹ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿåˆ†åŒºã€‚</li>
<li>ç‰©ç†åŒºåŸŸ(PE, Physical Extent)ï¼šç¡¬ç›˜å¯ä¾›æŒ‡æ´¾ç»™é€»è¾‘å·çš„æœ€å°å•ä½ï¼ˆé€šå¸¸ä¸º4MBï¼‰ã€‚</li>
</ul>
<hr />
<p>ä¼˜ç‚¹(1/2)</p>
<ul>
<li>æ¯”èµ·æ­£å¸¸çš„ç¡¬ç›˜åˆ†åŒºç®¡ç†ï¼ŒLVMæ›´å¯Œäºå¼¹æ€§ï¼š</li>
<li>ä½¿ç”¨å·ç»„ï¼Œä½¿ä¼—å¤šç¡¬ç›˜ç©ºé—´çœ‹èµ·æ¥åƒä¸€ä¸ªå¤§ç¡¬ç›˜ã€‚</li>
<li>ä½¿ç”¨é€»è¾‘å·ï¼Œå¯ä»¥åˆ›å»ºè·¨è¶Šä¼—å¤šç¡¬ç›˜ç©ºé—´çš„åˆ†åŒºã€‚</li>
<li>å¯ä»¥åˆ›å»ºå°çš„é€»è¾‘å·ï¼Œåœ¨ç©ºé—´ä¸è¶³æ—¶å†åŠ¨æ€è°ƒæ•´å®ƒçš„å¤§å°ã€‚</li>
<li>åœ¨è°ƒæ•´é€»è¾‘å·å¤§å°æ—¶å¯ä»¥ä¸ç”¨è€ƒè™‘é€»è¾‘å·åœ¨ç¡¬ç›˜ä¸Šçš„ä½ç½®ï¼Œä¸ç”¨æ‹…å¿ƒæ²¡æœ‰å¯ç”¨çš„è¿ç»­ç©ºé—´ã€‚</li>
<li>å¯ä»¥åœ¨çº¿å¯¹é€»è¾‘å·å’Œå·ç»„è¿›è¡Œåˆ›å»ºã€åˆ é™¤ã€è°ƒæ•´å¤§å°ç­‰æ“ä½œã€‚LVMä¸Šçš„æ–‡ä»¶ç³»ç»Ÿä¹Ÿéœ€è¦é‡æ–°è°ƒæ•´å¤§å°ï¼ŒæŸäº›æ–‡ä»¶ç³»ç»Ÿä¹Ÿæ”¯æŒè¿™æ ·çš„åœ¨çº¿æ“ä½œã€‚</li>
</ul>
<hr />
<p>ä¼˜ç‚¹(2/2)</p>
<ul>
<li>æ— éœ€é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œå°±å¯ä»¥å°†æœåŠ¡ä¸­ç”¨åˆ°çš„é€»è¾‘å·åœ¨çº¿/åŠ¨æ€è¿ç§»è‡³åˆ«çš„ç¡¬ç›˜ä¸Šã€‚</li>
<li>å…è®¸åˆ›å»ºå¿«ç…§ï¼Œå¯ä»¥ä¿å­˜æ–‡ä»¶ç³»ç»Ÿçš„å¤‡ä»½ï¼ŒåŒæ—¶ä½¿æœåŠ¡çš„ä¸‹çº¿æ—¶é—´ï¼ˆdowntimeï¼‰é™ä½åˆ°æœ€å°ã€‚</li>
</ul>
<p>è¿™äº›ä¼˜ç‚¹ä½¿å¾—LVMå¯¹æœåŠ¡å™¨çš„ç®¡ç†éå¸¸æœ‰ç”¨ï¼Œå¯¹äºæ¡Œé¢ç³»ç»Ÿç®¡ç†çš„å¸®åŠ©åˆ™æ²¡æœ‰é‚£ä¹ˆæ˜¾è‘—ï¼Œä½ éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œå–èˆã€‚</p>
<p>ç¼ºç‚¹</p>
<ul>
<li>åœ¨ç³»ç»Ÿè®¾ç½®æ—¶éœ€è¦æ›´å¤æ‚çš„é¢å¤–æ­¥éª¤ã€‚</li>
</ul>
<h1 id="æ–‡ä»¶å¤‡ä»½---æ–‡ä»¶æ‰“åŒ…">æ–‡ä»¶å¤‡ä»½ - æ–‡ä»¶æ‰“åŒ…</h1>
<hr />
<ul>
<li>å¤§éƒ¨åˆ†çš„Linuxå‹ç¼©å·¥å…·éµå¾ª<strong><em><a href="http://sec.cuc.edu.cn/huangwei/wiki/teaching_basic_how_to_programming.html">KISS(Keep It Simple and Stupid)åŸåˆ™</a></em></strong>ï¼Œå³â€œ<strong>æ¯ä¸ªç¨‹åºåªåšä¸€ä»¶äº‹ï¼Œä¸è¦è¯•å›¾åœ¨å•ä¸ªç¨‹åºä¸­å®Œæˆå¤šä¸ªä»»åŠ¡</strong>â€ï¼Œæ‰€ä»¥å‹ç¼©å·¥å…·åªæ˜¯è¢«è®¾è®¡ç”¨æ¥å¯¹å•ä¸ªæ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œå¦‚æœè¦å¯¹å¾ˆå¤šæ–‡ä»¶ã€ä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•å’Œæ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œåˆ™éœ€è¦å…ˆä½¿ç”¨<strong>æ‰“åŒ…å·¥å…·</strong>å¯¹æ‰¹é‡çš„æ–‡ä»¶å’Œç›®å½•è¿›è¡Œæ‰“åŒ…ï¼Œå˜æˆä¸€ä¸ªæ–‡ä»¶ä¹‹åï¼Œå†å°†å‹ç¼©ä»»åŠ¡äº¤ç»™ä¸“é—¨çš„å‹ç¼©å·¥å…·è½¯ä»¶ã€‚</li>
</ul>
<h1 id="æ–‡ä»¶å¤‡ä»½---æ–‡ä»¶å½’æ¡£">æ–‡ä»¶å¤‡ä»½ - æ–‡ä»¶å½’æ¡£</h1>
<hr />
<ul>
<li>è¿åŒæ‰€æœ‰ç›®å½•ã€æ–‡ä»¶çš„<strong>å±ä¸»ä¿¡æ¯</strong>ã€<strong>æ—¶é—´æˆ³ä¿¡æ¯</strong>ä¸€å¹¶<strong>æ‰“åŒ…</strong>ä¿å­˜</li>
<li>å¦¥å–„å¤„ç†lnåˆ›å»ºçš„é“¾æ¥æ–‡ä»¶ï¼ˆä¿ç•™åŸæœ‰çš„ç›®æ ‡æŒ‡å‘ä¿¡æ¯ï¼‰ï¼Œé¿å…é‡å¤å¤‡ä»½</li>
<li><a href="https://help.ubuntu.com/community/BackupYourSystem/TAR">BackupYourSystem/TAR from ubuntu official documentation</a></li>
<li><a href="https://wiki.archlinux.org/index.php/full_system_backup_with_rsync">Full system backup with rsync</a>
<ul>
<li>å¢é‡å¤‡ä»½</li>
</ul></li>
</ul>
<h1 id="æ–‡ä»¶æ¢å¤">æ–‡ä»¶æ¢å¤</h1>
<hr />
<ul>
<li>åœ¨<strong>ç³»ç»Ÿæ­£å¸¸æ—¶</strong>è¦<strong><em>å®šæœŸæµ‹è¯•å¤‡ä»½æ–‡ä»¶æ˜¯å¦å¯ä»¥æ­£å¸¸æ¢å¤å’Œè¿˜åŸ</em></strong>
<ul>
<li><a href="https://about.gitlab.com/2017/02/01/gitlab-dot-com-database-incident/">2017å¹´2æœˆ1æ—¥GitLab.comæ•°æ®åº“è¢«è¯¯åˆ äº‹ä»¶çš„å®˜æ–¹é€šå‘Š</a></li>
</ul></li>
<li>æ¢å¤å‰è®°å¾—å…ˆå¤‡ä»½å½“å‰ç›®æ ‡ç›®å½•å’Œæ–‡ä»¶ï¼Œé¿å…é”™è¯¯ã€ä¸å¯é€†çš„æ–‡ä»¶è¦†ç›–</li>
<li>æ¢å¤å‰æ£€æŸ¥å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§ï¼ˆä½¿ç”¨ç­¾åã€æ•£åˆ—å€¼æ ¡éªŒç­‰ï¼‰</li>
</ul>
<h1 id="ç³»ç»Ÿå¤‡ä»½">ç³»ç»Ÿå¤‡ä»½</h1>
<hr />
<p>å¤‡ä»½ç­–ç•¥è®¾è®¡çº¦æŸæ€§å› ç´ </p>
<ul>
<li>å¯ç§»æ¤æ€§ï¼ˆä¾¿æºæ€§ï¼‰ï¼šæ˜¯å¦éœ€è¦è€ƒè™‘è·¨OSçš„æ•°æ®å¤‡ä»½ä¸æ¢å¤ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å¯ä»¥è¯•è¯•<strong>dd</strong>ã€<strong>tar</strong>ã€<strong>cpio</strong>ç­‰å‘½ä»¤è¡Œå·¥å…·</li>
<li>æ— äººå€¼å®ˆï¼ˆè‡ªåŠ¨å¤‡ä»½ï¼‰</li>
<li>ç”¨æˆ·å‹å¥½ï¼šéä¸“ä¸šç”¨æˆ·é¦–é€‰äº¤äº’è®¾è®¡è‰¯å¥½çš„å¤‡ä»½æ¢å¤å·¥å…·</li>
<li>è¿œç¨‹å¤‡ä»½ï¼šé¦–é€‰CLIæ–¹å¼çš„å¤‡ä»½æ¢å¤å·¥å…·</li>
</ul>
<hr />
<ul>
<li>ç½‘ç»œå¤‡ä»½ï¼šé¦–é€‰æ”¯æŒç½‘ç»œå­˜å‚¨ç³»ç»Ÿè¯»å†™çš„å¤‡ä»½æ¢å¤å·¥å…·ï¼Œå¦‚tar</li>
<li>å­˜å‚¨ä»‹è´¨ï¼šæˆæœ¬ã€å¯é æ€§ã€å­˜å‚¨å®¹é‡å’Œä¼ è¾“æ€§èƒ½</li>
<li>å¯å®¡è®¡ï¼šæ‰€æœ‰æ•°æ®çš„å¤‡ä»½æ–¹æ¡ˆï¼Œå¤‡ä»½é¢‘ç‡å¦‚ä½•ï¼Œå¤‡ä»½æ•°æ®æ”¾åœ¨å“ªé‡Œï¼Œä¿ç•™å¤šä¹…ç­‰ä¼˜å…ˆä½¿ç”¨ä»£ç è¿›è¡Œå®šä¹‰ï¼Œè€Œä¸æ˜¯æ–‡æ¡£ã€‚å¤‡ä»½ç­–ç•¥çš„å˜æ›´å¯ä»¥é€šè¿‡ä»£ç å˜æ›´è®°å½•è¿›è¡Œå®¡è®¡ï¼Œå¯¹äºè¿åå¤‡ä»½ç­–ç•¥ã€å¯èƒ½ä¼šå¼•èµ·å¤‡ä»½æˆ–æ¢å¤å¤±è´¥çš„å˜æ›´è¦èƒ½é˜»æ­¢å˜æ›´ï¼ˆä»£ç æäº¤åˆå¹¶ï¼‰</li>
</ul>
<hr />
<h2 id="ç³»ç»Ÿå¤‡ä»½ä¸æ¢å¤">ç³»ç»Ÿå¤‡ä»½ä¸æ¢å¤</h2>
<ul>
<li>å¦‚æœç³»ç»Ÿè¢«è¯„ä¼°ä¸ºé­å—äº†å…¥ä¾µï¼Œå»ºè®®å¤‡ä»½å¥½é‡è¦æ•°æ®ä¹‹åï¼Œå½»åº•é‡è£…ç³»ç»Ÿ</li>
<li>åŸºäºæ–‡ä»¶å¤‡ä»½å’Œæ¢å¤æœºåˆ¶</li>
<li>ä½¿ç”¨ä¸“ç”¨çš„ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿçº§åˆ«çš„å¤‡ä»½å’Œæ¢å¤è§£å†³æ–¹æ¡ˆ</li>
</ul>
<h1 id="å¼€æœºè‡ªå¯åŠ¨é¡¹ç®¡ç†">å¼€æœºè‡ªå¯åŠ¨é¡¹ç®¡ç†</h1>
<hr />
<ul>
<li><a href="https://en.wikipedia.org/wiki/Init">SysVinit</a> | <a href="https://wiki.debian.org/LSBInitScripts">LSBInitScripts</a> | <a href="https://wiki.gentoo.org/wiki/OpenRC">OpenRC: Gentooç‹¬æœ‰çš„ç³»ç»ŸæœåŠ¡å¯åŠ¨æ§åˆ¶æœºåˆ¶</a>
<ul>
<li>/etc/init.d</li>
</ul></li>
<li><a href="http://upstart.ubuntu.com/">Upstart: Ubuntuï¼ˆæ›¾ç»ï¼‰å›¢é˜Ÿå¼€å‘çš„ç³»ç»ŸæœåŠ¡å¯åŠ¨æ§åˆ¶æœºåˆ¶</a>
<ul>
<li>/usr/share/upstart</li>
</ul></li>
<li><a href="https://www.freedesktop.org/wiki/Software/systemd/">Systemd</a>
<ul>
<li>/usr/lib/systemd</li>
</ul></li>
</ul>
<hr />
<h2 id="systemd---ç›®å‰ä¸»æµå‘è¡Œç‰ˆæ”¯æŒæƒ…å†µ">Systemd - ç›®å‰ä¸»æµå‘è¡Œç‰ˆæ”¯æŒæƒ…å†µ</h2>
<p><img src="images/chap0x03/systemd-adoption.png" /></p>
<hr />
<h2 id="systemd---ç‰¹æ€§ä¼˜ç‚¹">Systemd - ç‰¹æ€§ï¼ˆä¼˜ç‚¹ï¼‰</h2>
<ul>
<li>æä¾›äº†ç§¯æçš„ï¼ˆæœåŠ¡ã€è¿›ç¨‹ï¼‰å¹¶è¡ŒåŒ–å¯åŠ¨èƒ½åŠ›</li>
<li>ä½¿ç”¨socket å’Œ D-Bus æœºåˆ¶æ¥æ¿€æ´»å¯åŠ¨æœåŠ¡</li>
<li>æä¾›äº†æŒ‰éœ€å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹èƒ½åŠ›</li>
<li>å®ç°äº†åŸºäºäº‹åŠ¡é£æ ¼ä¾èµ–ç®¡ç†çš„æœåŠ¡æ§åˆ¶é€»è¾‘</li>
<li>ä½¿ç”¨Linuxçš„cgroupæœºåˆ¶ç®¡ç†è¿›ç¨‹</li>
<li>æ”¯æŒå¿«ç…§å’Œè¿˜åŸ</li>
<li>ç»´æŠ¤æŒ‚è½½å’Œè‡ªåŠ¨æŒ‚è½½ç‚¹</li>
</ul>
<hr />
<h2 id="systemd---äº‰è®®">Systemd - äº‰è®®</h2>
<ul>
<li>æ¿€è¿›çš„è®¾è®¡
<ul>
<li>é‡æ–°å‘æ˜äº†ä¸€å †å†å²æ‚ ä¹…çš„æ ¸å¿ƒæœåŠ¡(syslog, ntp, cron, fstab, dhcpcdç­‰ç­‰)ï¼Œè™½ç„¶æ˜¯ç®€åŒ–åŠŸèƒ½å’Œé…ç½®ï¼Œä½†æœ‰ç»éªŒçš„ç³»ç»Ÿç®¡ç†å‘˜æ›´ä¿¡èµ–ä»–ä»¬ç†Ÿæ‚‰çš„æœåŠ¡ï¼ˆå°½ç®¡é…ç½®è¾ƒä¸ºå¤æ‚ï¼‰</li>
<li>ä½œä¸ºç³»ç»Ÿçš„1å·è¿›ç¨‹ï¼Œæ‰¿è½½çš„åŠŸèƒ½å¤ªå¤šï¼šå•ç‚¹æ•…éšœé£é™©é›†ä¸­ã€ä¸ç¬¦åˆUNIXè®¾è®¡å“²å­¦<strong><em><a href="http://sec.cuc.edu.cn/huangwei/wiki/teaching_basic_how_to_programming.html">KISS</a></em></strong></li>
<li>ä¸éµå¾ª POSIX æ ‡å‡†ï¼Œæ— æ³•ç§»æ¤åˆ°Linuxä¹‹å¤–çš„å¹³å°</li>
</ul></li>
<li>è¿‡å¿«çš„å¼€å‘è¿­ä»£
<ul>
<li>ä»£ç è´¨é‡ä¸é«˜</li>
<li>ä¸è€ƒè™‘å‘åå…¼å®¹</li>
<li>é¢‘ç¹å˜æ›´è®¾è®¡å’Œæ¥å£</li>
</ul></li>
</ul>
<hr />
<h2 id="systemd---æ¶æ„">Systemd - æ¶æ„</h2>
<p><img src="images/chap0x03/Systemd_components.svg.png" /></p>
<h1 id="åŠ¨æ‰‹å®æˆ˜systemd">åŠ¨æ‰‹å®æˆ˜Systemd</h1>
<hr />
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html">Systemd å…¥é—¨æ•™ç¨‹ï¼šå‘½ä»¤ç¯‡ by é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html">Systemd å…¥é—¨æ•™ç¨‹ï¼šå®æˆ˜ç¯‡ by é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a>
<ul>
<li>å‚ç…§ç¬¬2ç« ä½œä¸šçš„è¦æ±‚ï¼Œå®Œæ•´å®éªŒæ“ä½œè¿‡ç¨‹é€šè¿‡<a href="https://asciinema.org">asciinema</a>è¿›è¡Œå½•åƒå¹¶ä¸Šä¼ ï¼Œæ–‡æ¡£é€šè¿‡githubä¸Šä¼ </li>
</ul></li>
</ul>
<h1 id="netplan"><a href="https://netplan.io/">NetPlan</a></h1>
<hr />
<h2 id="åˆä¸€ä¸ªç½‘ç»œé…ç½®ç®¡ç†å·¥å…·">åˆä¸€ä¸ªã€Œç½‘ç»œé…ç½®ç®¡ç†ã€å·¥å…·</h2>
<p>è®¾è®¡ç”¨äºã€Œæ›¿ä»£ã€ç»å…¸ Linux ç½‘ç»œç®¡ç†å·¥å…· <a href="http://manpages.ubuntu.com/manpages/xenial/man5/interfaces.5.html">ifupdown</a></p>
<p><img src="images/chap0x03/netplan_design_overview.png" /></p>
<hr />
<h2 id="å“ªäº›å‘è¡Œç‰ˆæœ¬åœ¨ç”¨">å“ªäº›å‘è¡Œç‰ˆæœ¬åœ¨ç”¨</h2>
<ul>
<li><a href="https://blog.ubuntu.com/2017/07/10/netplan-by-default-in-17-10">Ubuntu 17.10</a> å¼€å§‹åœ¨ Ubuntu å®¶æ—æ‰€æœ‰å‘è¡Œç‰ˆä¸­é»˜è®¤å®‰è£…å’Œå¯ç”¨</li>
<li>ç›®å‰å…¶ä»–å‘è¡Œç‰ˆåº”ç”¨æ›´å¹¿æ³›çš„è¿˜æ˜¯ç»å…¸çš„ <a href="http://manpages.ubuntu.com/manpages/xenial/man5/interfaces.5.html">ifupdown</a></li>
</ul>
<hr />
<h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<ul>
<li>é…ç½®æ–‡ä»¶è·¯å¾„ <code>/etc/netplan/*.yaml</code>
<ul>
<li><code>/run/netplan/*.yaml</code></li>
<li><code>/lib/netplan/*.yaml</code></li>
</ul></li>
<li>æµ‹è¯•å’Œåº”ç”¨é…ç½® <code>netplan apply</code>
<ul>
<li>éªŒè¯ YAML è¯­æ³•æ­£ç¡®æ€§ <code>yamllint</code></li>
</ul></li>
<li><a href="https://netplan.io/faq">FAQ</a></li>
</ul>
<hr />
<h2 id="é…ç½®ç¤ºä¾‹">é…ç½®ç¤ºä¾‹</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># https://netplan.io/examples#using-dhcp-and-static-addressing</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="co"># https://netplan.io/reference</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co"># https://github.com/CanonicalLtd/netplan/tree/master/examples</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="fu">network</span><span class="kw">:</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="at">  </span><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co"># renderer: NetworkManager</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="at">  </span><span class="fu">renderer</span><span class="kw">:</span><span class="at"> networkd</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="at">  </span><span class="fu">ethernets</span><span class="kw">:</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="at">    </span><span class="fu">enp3s0</span><span class="kw">:</span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="at">      </span><span class="fu">dhcp4</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="at"> </span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="at">    </span><span class="fu">enp5s0</span><span class="kw">:</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="at">      </span><span class="fu">addresses</span><span class="kw">:</span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="at">        </span><span class="kw">-</span><span class="at"> 10.10.10.2/24</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="at">      </span><span class="fu">match</span><span class="kw">:</span></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="at">        </span><span class="fu">macaddress</span><span class="kw">:</span><span class="at"> 56:2d:d1:8e:62:17</span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="at">      </span><span class="fu">gateway4</span><span class="kw">:</span><span class="at"> </span><span class="fl">10.10.10.1</span></span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="at">      </span><span class="fu">nameservers</span><span class="kw">:</span></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="at">          </span><span class="fu">search</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">mydomain</span><span class="kw">,</span><span class="at"> otherdomain</span><span class="kw">]</span></span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="at">          </span><span class="fu">addresses</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="fl">10.10.10.1</span><span class="kw">,</span><span class="at"> </span><span class="fl">1.1.1.1</span><span class="kw">]</span></span></code></pre></div>
<hr />
<h2 id="æ–°çš„ç½‘å¡å‘½åé£æ ¼">æ–°çš„ç½‘å¡å‘½åé£æ ¼</h2>
<p><code>enp3s0</code></p>
<ul>
<li><code>en</code> ä»£è¡¨ä»¥å¤ªç½‘å¡</li>
<li><code>p3s0</code> ä»£è¡¨ PCI æ¥å£çš„ç‰©ç†ä½ç½®ä¸º <code>(3, 0)</code>, å…¶ä¸­æ¨ªåº§æ ‡ä»£è¡¨ <code>bus</code>ï¼Œçºµåº§æ ‡ä»£è¡¨ <code>slot</code></li>
</ul>
<hr />
<p>æ‘˜è‡ª <a href="https://github.com/systemd/systemd/blob/master/src/udev/udev-builtin-net_id.c#L10">udev/udev-builtin-net_id.c</a></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb9-1"><a href="#cb9-1"></a><span class="co">/* http://www.freedesktop.org/wiki/Software/systemd/PredictableNetworkInterfaceNames</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co"> *</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co"> * Two character prefixes based on the type of interface:</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co"> *   en â€” Ethernet</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co"> *   ib â€” InfiniBand</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co"> *   sl â€” serial line IP (slip)</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co"> *   wl â€” wlan</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co"> *   ww â€” wwan</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co"> *</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co"> * Type of names:</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="co"> *   b&lt;number&gt;                             â€” BCMA bus core number</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co"> *   c&lt;bus_id&gt;                             â€” bus id of a grouped CCW or CCW device,</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co"> *                                           with all leading zeros stripped [s390]</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co"> *   o&lt;index&gt;[n&lt;phys_port_name&gt;|d&lt;dev_port&gt;]</span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co"> *                                         â€” on-board device index number</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co"> *   s&lt;slot&gt;[f&lt;function&gt;][n&lt;phys_port_name&gt;|d&lt;dev_port&gt;]</span></span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="co"> *                                         â€” hotplug slot index number</span></span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="co"> *   x&lt;MAC&gt;                                â€” MAC address</span></span>
<span id="cb9-19"><a href="#cb9-19"></a><span class="co"> *   [P&lt;domain&gt;]p&lt;bus&gt;s&lt;slot&gt;[f&lt;function&gt;][n&lt;phys_port_name&gt;|d&lt;dev_port&gt;]</span></span>
<span id="cb9-20"><a href="#cb9-20"></a><span class="co"> *                                         â€” PCI geographical location</span></span>
<span id="cb9-21"><a href="#cb9-21"></a><span class="co"> *   [P&lt;domain&gt;]p&lt;bus&gt;s&lt;slot&gt;[f&lt;function&gt;][u&lt;port&gt;][..][c&lt;config&gt;][i&lt;interface&gt;]</span></span>
<span id="cb9-22"><a href="#cb9-22"></a><span class="co"> *                                         â€” USB port number chain</span></span>
<span id="cb9-23"><a href="#cb9-23"></a><span class="co"> *   v&lt;slot&gt;                               - VIO slot number (IBM PowerVM)</span></span>
<span id="cb9-24"><a href="#cb9-24"></a><span class="co"> *   a&lt;vendor&gt;&lt;model&gt;i&lt;instance&gt;           â€” Platform bus ACPI instance id</span></span>
<span id="cb9-25"><a href="#cb9-25"></a><span class="co"> */</span></span></code></pre></div>
<h1 id="å…¶ä»–è¿‡æ—¶çš„çŸ¥åç½‘ç»œç®¡ç†å·¥å…·">å…¶ä»–è¿‡æ—¶çš„çŸ¥åç½‘ç»œç®¡ç†å·¥å…·</h1>
<hr />
<p><a href="https://wiki.linuxfoundation.org/networking/net-tools">net-tools</a> å·²è¿‡æ—¶ï¼Œ<a href="https://wiki.linuxfoundation.org/networking/iproute2">iproute2</a> æ˜¯ç°åœ¨ã€‚</p>
<blockquote>
<p>Most network configuration manuals still refer to ifconfig and route as the primary network configuration tools, but ifconfig is known to behave inadequately in modern network environments. <strong>They should be deprecated</strong>, but most distros still include them.</p>
</blockquote>
<hr />
<table>
<thead>
<tr class="header">
<th style="text-align: center;"><a href="http://net-tools.sourceforge.net/">è¿‡æ—¶å‘½ä»¤ net-tools</a></th>
<th style="text-align: center;"><a href="https://dougvitale.wordpress.com/2011/12/21/deprecated-linux-networking-commands-and-their-replacements/">æ›¿ä»£å‘½ä»¤ iproute2</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">arp</td>
<td style="text-align: center;">ip n (ip neighbor)</td>
</tr>
<tr class="even">
<td style="text-align: center;">ifconfig</td>
<td style="text-align: center;">ip a (ip addr), ip link, ip -s (ip -stats)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">iwconfig</td>
<td style="text-align: center;">iw</td>
</tr>
<tr class="even">
<td style="text-align: center;">nameif</td>
<td style="text-align: center;">ip link, ifrename</td>
</tr>
<tr class="odd">
<td style="text-align: center;">netstat</td>
<td style="text-align: center;">ss</td>
</tr>
<tr class="even">
<td style="text-align: center;">netstat -i</td>
<td style="text-align: center;">ip -s link</td>
</tr>
<tr class="odd">
<td style="text-align: center;">netstat -r</td>
<td style="text-align: center;">ip route</td>
</tr>
<tr class="even">
<td style="text-align: center;">netstat -g</td>
<td style="text-align: center;">ip maddr</td>
</tr>
<tr class="odd">
<td style="text-align: center;">route</td>
<td style="text-align: center;">ip r (ip route)</td>
</tr>
</tbody>
</table>
<h1 id="æœ¬ç« å®Œæˆåçš„è‡ªæŸ¥æ¸…å•">æœ¬ç« å®Œæˆåçš„è‡ªæŸ¥æ¸…å•</h1>
<hr />
<ul>
<li>å¦‚ä½•æ·»åŠ ä¸€ä¸ªç”¨æˆ·å¹¶ä½¿å…¶å…·å¤‡sudoæ‰§è¡Œç¨‹åºçš„æƒé™ï¼Ÿ</li>
<li>å¦‚ä½•å°†ä¸€ä¸ªç”¨æˆ·æ·»åŠ åˆ°ä¸€ä¸ªç”¨æˆ·ç»„ï¼Ÿ</li>
<li>å¦‚ä½•æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„åˆ†åŒºè¡¨å’Œæ–‡ä»¶ç³»ç»Ÿè¯¦ç»†ä¿¡æ¯ï¼Ÿ</li>
<li>å¦‚ä½•å®ç°å¼€æœºè‡ªåŠ¨æŒ‚è½½Virtualboxçš„å…±äº«ç›®å½•åˆ†åŒºï¼Ÿ</li>
<li>åŸºäºLVMï¼ˆé€»è¾‘åˆ†å·ç®¡ç†ï¼‰çš„åˆ†åŒºå¦‚ä½•å®ç°åŠ¨æ€æ‰©å®¹å’Œç¼©å‡å®¹é‡ï¼Ÿ</li>
<li>å¦‚ä½•é€šè¿‡systemdè®¾ç½®å®ç°åœ¨ç½‘ç»œè¿é€šæ—¶è¿è¡Œä¸€ä¸ªæŒ‡å®šè„šæœ¬ï¼Œåœ¨ç½‘ç»œæ–­å¼€æ—¶è¿è¡Œå¦ä¸€ä¸ªè„šæœ¬ï¼Ÿ</li>
<li>å¦‚ä½•é€šè¿‡systemdè®¾ç½®å®ç°ä¸€ä¸ªè„šæœ¬åœ¨ä»»ä½•æƒ…å†µä¸‹è¢«æ€æ­»ä¹‹åä¼šç«‹å³é‡æ–°å¯åŠ¨ï¼Ÿå®ç°<strong><em>æ€ä¸æ­»</em></strong>ï¼Ÿ</li>
</ul>
<h1 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h1>
<hr />
<ul>
<li><a href="https://en.wikipedia.org/wiki/User_identifier">User identifier from WikiPedia</a></li>
<li><a href="http://people.canonical.com/~cjwatson/ubuntu-policy/policy.html/ch-opersys.html">Ubuntu Policy Manual Chapter 9 - The Operating System</a></li>
<li><a href="https://wiki.archlinux.org/index.php/umask">umask</a></li>
<li><a href="https://www.zhihu.com/question/55300424">å¦‚ä½•è¯„ä»· 2017 å¹´ 2 æœˆ 1 æ—¥ GitLab æ•°æ®åº“è¢«è¯¯åˆ ï¼Ÿ from çŸ¥ä¹</a></li>
</ul>
<hr />
<ul>
<li><a href="http://forensicswiki.org/wiki/Tools">Forensics Tools on Linux</a></li>
<li><a href="http://harttle.com/2015/11/06/tmux-startup.html">ä¼˜é›…åœ°ä½¿ç”¨å‘½ä»¤è¡Œï¼šTmux ç»ˆç«¯å¤ç”¨</a></li>
<li><a href="http://cenalulu.github.io/linux/tmux/">Tmux - Linuxä»ä¸šè€…å¿…å¤‡åˆ©å™¨</a></li>
<li><a href="http://www.tldp.org/LDP/lame/LAME/linux-admin-made-easy/server-backup.html">Linux Administration Made Easy Chapter 8. Backup and Restore Procedures</a></li>
<li><a href="https://help.ubuntu.com/community/BackupYourSystem">BackupYourSystem from ubuntu official documentation</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html">Systemd å…¥é—¨æ•™ç¨‹ï¼šå‘½ä»¤ç¯‡ by é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html">Systemd å…¥é—¨æ•™ç¨‹ï¼šå®æˆ˜ç¯‡ by é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a></li>
</ul>
<hr />
<ul>
<li><a href="https://en.wikipedia.org/wiki/Systemd">systemd on wikipedia</a></li>
<li><a href="https://fedoraproject.org/wiki/Systemd/zh-cn">Fedoraå®˜ç½‘Wikiå¯¹Systemdçš„ä»‹ç»</a></li>
<li><a href="https://wiki.archlinux.org/index.php/systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">ArchiLinuxå®˜ç½‘Wikiå¯¹Systemdçš„ä»‹ç»</a></li>
<li><a href="https://wiki.debian.org/systemd">Debianå®˜ç½‘Wikiå¯¹Systemdçš„ä»‹ç»</a></li>
<li><a href="https://wiki.ubuntu.com/SystemdForUpstartUsers">Ubuntuå®˜ç½‘Wikiå¯¹Systemdçš„ä»‹ç»</a></li>
<li><a href="https://www.zhihu.com/question/25873473">systemd ä¸ºä»€ä¹ˆä¼šæœ‰é‚£ä¹ˆå¤§çš„äº‰è®®ï¼Ÿ</a></li>
<li><a href="https://wiki.debian.org/Debate/initsystem/">Debianå®˜æ–¹å¯¹ç›®å‰ä¸»æµç³»ç»Ÿå¼•å¯¼æœºåˆ¶çš„ä¼˜ç¼ºç‚¹åˆ†æè®¨è®º</a></li>
<li><a href="https://www.freedesktop.org/software/systemd/man/bootup.html">ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹</a></li>
</ul>
</body>
</html>
